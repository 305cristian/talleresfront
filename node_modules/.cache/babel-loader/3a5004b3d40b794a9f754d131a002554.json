{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN DEP IT\\\\Documents\\\\NetBeansProjects\\\\talleresfront\\\\src\\\\components\\\\Login.js\";\nimport React, { Component } from 'react';\nimport { Container } from 'reactstrap';\nimport { render } from 'react-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser, faKey, faSignInAlt } from '@fortawesome/free-solid-svg-icons';\nimport image from '../img/user.png';\nimport P from '../components/P';\nimport axios from 'axios';\nimport Cookies from 'universal-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  REACT_APP_HOST\n} = process.env;\nconst cookies = new Cookies();\n\nconst validation = data => {\n  const errors = {};\n\n  if (!data.user) {\n    errors.user = 'El campo user es obligatorio';\n  }\n\n  if (!data.pass) {\n    errors.pass = 'El campo contraseña es obligatorio';\n  }\n\n  return errors;\n};\n\nclass login extends Component {\n  constructor() {\n    super();\n\n    this.handleChange = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      this.setState({\n        [name]: value\n      }); //        console.log(e.target.value)\n    };\n\n    this.state = {\n      user: '',\n      pass: '',\n      user_session: [],\n      errors: {}\n    };\n    this.handleKeyPress = this.handleKeyPress.bind(this);\n  }\n\n  componentDidMount() {\n    if (cookies.get('nombre')) {\n      window.location.href = '/home';\n    }\n  }\n\n  handleKeyPress(e) {\n    if (e.key === 'Enter') {\n      //            console.log('do validate');\n      this.login_session();\n    }\n  }\n\n  login_session() {\n    const {\n      errors,\n      ...sinErrors\n    } = this.state;\n    const result = validation(sinErrors);\n    this.setState({\n      errors: result\n    });\n\n    if (!Object.keys(result).length) {\n      const datos = {\n        user: this.state.user,\n        pass: this.state.pass\n      };\n      axios.post(`${REACT_APP_HOST}/api/users/login`, datos).then(response => {\n        return response.data;\n      }).then(response => {\n        if (response.auth) {\n          console.log('golaaaa'); //                    this.validar_token();\n        } else {\n          const error_logeo = document.getElementById('idError');\n          error_logeo.innerHTML = 'Usuario o contraseña incorrectos';\n        }\n      });\n    }\n  }\n\n  validar_token() {\n    axios.post(`${REACT_APP_HOST}/api/users/validar_token`).then(response => {\n      return response.data;\n    }).then(response => {\n      if (response) {\n        cookies.set('id', response._id, {\n          path: '/'\n        });\n        cookies.set('nombre', response.nombre, {\n          path: '/'\n        });\n        cookies.set('apellido', response.apellido, {\n          path: '/'\n        });\n        cookies.set('user', response.user, {\n          path: '/'\n        });\n        cookies.set('rol', response.rol, {\n          path: '/'\n        });\n        cookies.set('cedula', response.cedula, {\n          path: '/'\n        });\n        cookies.set('image', response.image, {\n          path: '/'\n        });\n        window.location.href = '/home';\n      } else {\n        const error_logeo = document.getElementById('idError');\n        error_logeo.innerHTML = 'Usuario o contraseña incorrectos';\n      }\n    });\n  }\n\n  render() {\n    const {\n      errors\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"body\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image_login modal-dialog sombra text-center border my-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-dialog text-center \",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-sm-8 main-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"display-4 text-white\",\n              children: \"LOGIN\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n              className: \"bg-info col-md-8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-dialog text-center \",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-dialog text-center \",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-8 main-section\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-content sombra\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-12 img-user\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: image\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                  id: \"idFormulario\",\n                  method: \"get\",\n                  className: \"col-12 \",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"input-group mb-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group-prepend\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"input-group-text\",\n                        children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                          icon: faUser\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 127,\n                          columnNumber: 88\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 127,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 126,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      name: \"user\",\n                      type: \"text\",\n                      required: \"\",\n                      id: \"user\",\n                      onChange: this.handleChange,\n                      className: \"form-control\",\n                      placeholder: \"Usuario\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 129,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 45\n                  }, this), errors.user && /*#__PURE__*/_jsxDEV(P, {\n                    errors: errors.user\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 61\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"input-group mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group-prepend\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"input-group-text\",\n                        children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                          icon: faKey\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 135,\n                          columnNumber: 88\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 135,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 134,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      name: \"pass\",\n                      type: \"password\",\n                      required: \"\",\n                      id: \"pass\",\n                      onKeyPress: this.handleKeyPress,\n                      onChange: this.handleChange,\n                      className: \"form-control\",\n                      placeholder: \"Contrase\\xF1a\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 137,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 133,\n                    columnNumber: 45\n                  }, this), errors.pass && /*#__PURE__*/_jsxDEV(P, {\n                    errors: errors.pass\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 61\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      id: \"btnLogin\",\n                      className: \"btn btn-primary\",\n                      onClick: () => {\n                        this.login_session();\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                        icon: faSignInAlt\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 144,\n                        columnNumber: 64\n                      }, this), \"  ENTRAR\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 142,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 141,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mb-3 aler alert-danger\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"display text-danger\",\n                      id: \"idError\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-white\",\n            children: \"Sistema de Capacitaciones online\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }, this);\n  }\n\n}\n\nexport default login;","map":{"version":3,"sources":["C:/Users/ADMIN DEP IT/Documents/NetBeansProjects/talleresfront/src/components/Login.js"],"names":["React","Component","Container","render","FontAwesomeIcon","faUser","faKey","faSignInAlt","image","P","axios","Cookies","REACT_APP_HOST","process","env","cookies","validation","data","errors","user","pass","login","constructor","handleChange","e","name","value","target","setState","state","user_session","handleKeyPress","bind","componentDidMount","get","window","location","href","key","login_session","sinErrors","result","Object","keys","length","datos","post","then","response","auth","console","log","error_logeo","document","getElementById","innerHTML","validar_token","set","_id","path","nombre","apellido","rol","cedula"],"mappings":"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","sourcesContent":["import React, {Component} from'react';\nimport {Container} from 'reactstrap';\nimport {render}from 'react-dom';\nimport { FontAwesomeIcon }from '@fortawesome/react-fontawesome'\nimport {faUser, faKey, faSignInAlt}from '@fortawesome/free-solid-svg-icons'\nimport image from'../img/user.png';\nimport P from'../components/P';\n\nimport axios from 'axios';\nimport Cookies from 'universal-cookie';\n\nconst {REACT_APP_HOST} = process.env;\nconst cookies = new Cookies();\n\nconst validation = data => {\n    const errors = {};\n    if (!data.user) {\n        errors.user = 'El campo user es obligatorio';\n    }\n    if (!data.pass) {\n        errors.pass = 'El campo contraseña es obligatorio';\n    }\n    return errors;\n}\n\nclass login extends Component {\n    constructor() {\n        super();\n        this.state = {\n            user: '',\n            pass: '',\n            user_session: [],\n            errors: {}\n        }\n\n        this.handleKeyPress = this.handleKeyPress.bind(this);\n\n    }\n\n    componentDidMount() {\n        if (cookies.get('nombre')) {\n            window.location.href = '/home'\n        }\n    }\n\n    handleChange = (e) => {\n        const{name, value} = e.target;\n        this.setState({[name]: value})\n//        console.log(e.target.value)\n    }\n\n    handleKeyPress(e) {\n\n        if (e.key === 'Enter') {\n//            console.log('do validate');\n            this.login_session();\n        }\n    }\n\n    login_session() {\n\n        const {errors, ...sinErrors} = this.state;\n        const result = validation(sinErrors);\n        this.setState({errors: result});\n        if (!Object.keys(result).length) {\n\n            const datos = {\n                user: this.state.user,\n                pass: this.state.pass\n            };\n            axios.post(`${REACT_APP_HOST}/api/users/login`, datos).then((response) => {\n                return response.data;\n            }).then((response) => {\n                if (response.auth) {\n                    console.log('golaaaa')\n//                    this.validar_token();\n                } else {\n                    const error_logeo = document.getElementById('idError')\n                    error_logeo.innerHTML = 'Usuario o contraseña incorrectos'\n                }\n            });\n        }\n    }\n\n    validar_token() {\n\n        axios.post(`${REACT_APP_HOST}/api/users/validar_token`).then((response) => {\n            return response.data;\n        }).then((response) => {\n            if (response) {\n                cookies.set('id', response._id, {path: '/'});\n                cookies.set('nombre', response.nombre, {path: '/'});\n                cookies.set('apellido', response.apellido, {path: '/'});\n                cookies.set('user', response.user, {path: '/'});\n                cookies.set('rol', response.rol, {path: '/'});\n                cookies.set('cedula', response.cedula, {path: '/'});\n                cookies.set('image', response.image, {path: '/'});\n                window.location.href = '/home';\n            } else {\n                const error_logeo = document.getElementById('idError')\n                error_logeo.innerHTML = 'Usuario o contraseña incorrectos'\n            }\n        })\n    }\n\n    render() {\n        const{errors} = this.state;\n        return(\n                <Container className=\"body\">\n                    <div className=\"image_login modal-dialog sombra text-center border my-5\">\n                        <div className=\"modal-dialog text-center \">\n                            <div className=\"col-sm-8 main-section\">\n                                <p className=\"display-4 text-white\" >LOGIN</p>\n                                <hr className=\"bg-info col-md-8\"></hr>   \n                            </div>       \n                        </div>\n                        <div  className=\"modal-dialog text-center \">\n                            <div     className=\"modal-dialog text-center \">\n                                <div className=\"col-sm-8 main-section\">\n                                    <div className=\"modal-content sombra\">\n                                        <div className=\"col-12 img-user\">\n                                            <img src={image}/>\n                                        </div>            \n                                        <form id=\"idFormulario\" method=\"get\" className=\"col-12 \">\n                                            <div className=\"input-group mb-2\">\n                                                <div className=\"input-group-prepend\">\n                                                    <span className=\"input-group-text\"><FontAwesomeIcon icon={faUser}/></span>\n                                                </div>    \n                                                <input name=\"user\" type=\"text\" required=\"\" id=\"user\" onChange={this.handleChange} className=\"form-control\" placeholder=\"Usuario\"/>\n                                            </div>\n                                            {errors.user && <P errors={errors.user} />}\n                \n                                            <div className=\"input-group mb-3\">\n                                                <div className=\"input-group-prepend\">\n                                                    <span className=\"input-group-text\"><FontAwesomeIcon icon={faKey}/></span>\n                                                </div>    \n                                                <input name=\"pass\" type=\"password\" required=\"\" id=\"pass\" onKeyPress={this.handleKeyPress} onChange={this.handleChange} className=\"form-control\" placeholder=\"Contraseña\"/>  \n                                            </div>\n                                            {errors.pass && <P errors={errors.pass} />}\n                \n                                            <div className=\"form-group\">\n                                                <button type=\"button\" id=\"btnLogin\" className=\"btn btn-primary\" onClick={() => {\n                                                        this.login_session()\n                                                            }}><FontAwesomeIcon icon={faSignInAlt}/>  ENTRAR</button>      \n                                            </div>\n                                            <div className=\"mb-3 aler alert-danger\">\n                                                <span className=\"display text-danger\" id=\"idError\"></span>\n                                            </div>\n                \n                                        </form>\n                \n                                    </div> \n                \n                                </div>\n                            </div>\n                \n                        </div>\n                        <div>\n                            <h4 className=\"text-white\">Sistema de Capacitaciones online</h4>\n                        </div>\n                    </div>\n                \n                </Container>\n\n                )\n    }\n}\n\nexport default login;"]},"metadata":{},"sourceType":"module"}