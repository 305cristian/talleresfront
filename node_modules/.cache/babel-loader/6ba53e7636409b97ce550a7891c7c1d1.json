{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _TableCell = _interopRequireDefault(require(\"@material-ui/core/TableCell\"));\n\nvar _TableRow = _interopRequireDefault(require(\"@material-ui/core/TableRow\"));\n\nvar _Typography = _interopRequireDefault(require(\"@material-ui/core/Typography\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _utils = require(\"../../utils\");\n\nvar CommonValues = _interopRequireWildcard(require(\"../../utils/common-values\"));\n\nvar _validate = require(\"../../utils/validate\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction MTableEditRow(props) {\n  var _useState = (0, _react.useState)(function () {\n    function createRowData() {\n      return props.columns.filter(function (column) {\n        return 'initialEditValue' in column && column.field;\n      }).reduce(function (prev, column) {\n        prev[column.field] = column.initialEditValue;\n        return prev;\n      }, {});\n    }\n\n    var data = props.data ? JSON.parse(JSON.stringify(props.data)) : createRowData();\n\n    if (props.mode === 'bulk' && props.bulkEditChangedRows[data.tableData.id]) {\n      data = props.bulkEditChangedRows[data.tableData.id].newData;\n    }\n\n    return {\n      data: data\n    };\n  }),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  function renderColumns() {\n    var size = CommonValues.elementSize(props);\n    var mapArr = props.columns.filter(function (columnDef) {\n      return !columnDef.hidden && !(columnDef.tableData.groupOrder > -1);\n    }).sort(function (a, b) {\n      return a.tableData.columnOrder - b.tableData.columnOrder;\n    }).map(function (columnDef, index) {\n      var value = typeof state.data[columnDef.field] !== 'undefined' ? state.data[columnDef.field] : (0, _utils.byString)(state.data, columnDef.field);\n\n      var getCellStyle = function getCellStyle(columnDef, value) {\n        var cellStyle = {\n          color: 'inherit'\n        };\n\n        if (typeof columnDef.cellStyle === 'function') {\n          cellStyle = _objectSpread(_objectSpread({}, cellStyle), columnDef.cellStyle(value, props.data));\n        } else {\n          cellStyle = _objectSpread(_objectSpread({}, cellStyle), columnDef.cellStyle);\n        }\n\n        if (columnDef.disableClick) {\n          cellStyle.cursor = 'default';\n        }\n\n        return _objectSpread({}, cellStyle);\n      };\n\n      var style = {};\n\n      if (index === 0) {\n        style.paddingLeft = 24 + props.level * 20;\n      }\n\n      var allowEditing = false;\n\n      if (columnDef.editable === undefined) {\n        allowEditing = true;\n      }\n\n      if (columnDef.editable === 'always') {\n        allowEditing = true;\n      }\n\n      if (columnDef.editable === 'onAdd' && props.mode === 'add') {\n        allowEditing = true;\n      }\n\n      if (columnDef.editable === 'onUpdate' && props.mode === 'update') {\n        allowEditing = true;\n      }\n\n      if (typeof columnDef.editable === 'function') {\n        allowEditing = columnDef.editable(columnDef, props.data);\n      }\n\n      if (!columnDef.field || !allowEditing) {\n        var readonlyValue = props.getFieldValue(state.data, columnDef);\n        return /*#__PURE__*/_react[\"default\"].createElement(props.components.Cell, {\n          size: size,\n          icons: props.icons,\n          columnDef: columnDef,\n          value: readonlyValue,\n          key: columnDef.tableData.id,\n          rowData: props.data,\n          style: getCellStyle(columnDef, value)\n        });\n      } else {\n        var editComponent = columnDef.editComponent,\n            cellProps = (0, _objectWithoutProperties2[\"default\"])(columnDef, [\"editComponent\"]);\n        var EditComponent = editComponent || props.components.EditField;\n        var error = (0, _validate.validateInput)(columnDef, state.data);\n        return /*#__PURE__*/_react[\"default\"].createElement(_TableCell[\"default\"], {\n          size: size,\n          key: columnDef.tableData.id,\n          align: ['numeric'].indexOf(columnDef.type) !== -1 ? 'right' : 'left',\n          style: getCellStyle(columnDef, value)\n        }, /*#__PURE__*/_react[\"default\"].createElement(EditComponent, {\n          key: columnDef.tableData.id,\n          columnDef: cellProps,\n          value: value,\n          error: !error.isValid,\n          helperText: error.helperText,\n          locale: props.localization.dateTimePickerLocalization,\n          rowData: state.data,\n          onChange: function onChange(value) {\n            var data = _objectSpread({}, state.data);\n\n            (0, _utils.setByString)(data, columnDef.field, value); // data[columnDef.field] = value;\n\n            setState({\n              data: data\n            });\n\n            if (props.onBulkEditRowChanged) {\n              props.onBulkEditRowChanged(props.data, data);\n            }\n          },\n          onRowDataChange: function onRowDataChange(data) {\n            setState({\n              data: data\n            });\n\n            if (props.onBulkEditRowChanged) {\n              props.onBulkEditRowChanged(props.data, data);\n            }\n          }\n        }));\n      }\n    });\n    return mapArr;\n  }\n\n  var handleSave = function handleSave() {\n    var newData = state.data;\n    delete newData.tableData;\n    props.onEditingApproved(props.mode, state.data, props.data);\n  };\n\n  function renderActions() {\n    if (props.mode === 'bulk') {\n      return;\n    }\n\n    var size = CommonValues.elementSize(props);\n\n    var localization = _objectSpread(_objectSpread({}, MTableEditRow.defaultProps.localization), props.localization);\n\n    var isValid = props.columns.every(function (column) {\n      var error = (0, _validate.validateInput)(column, state.data);\n      return error.isValid;\n    });\n    var actions = [{\n      icon: props.icons.Check,\n      tooltip: localization.saveTooltip,\n      disabled: !isValid,\n      onClick: handleSave\n    }, {\n      icon: props.icons.Clear,\n      tooltip: localization.cancelTooltip,\n      onClick: function onClick() {\n        props.onEditingCanceled(props.mode, props.data);\n      }\n    }];\n    return /*#__PURE__*/_react[\"default\"].createElement(_TableCell[\"default\"], {\n      size: size,\n      padding: \"none\",\n      key: \"key-actions-column\",\n      style: _objectSpread({\n        width: 42 * actions.length,\n        padding: '0px 5px'\n      }, props.options.editCellStyle)\n    }, /*#__PURE__*/_react[\"default\"].createElement(props.components.Actions, {\n      data: props.data,\n      actions: actions,\n      components: props.components,\n      size: size\n    }));\n  }\n\n  function getStyle() {\n    var style = {\n      // boxShadow: '1px 1px 1px 1px rgba(0,0,0,0.2)',\n      borderBottom: '1px solid red'\n    };\n    return style;\n  }\n\n  var handleKeyDown = function handleKeyDown(e) {\n    if (e.keyCode === 13 && e.target.type !== 'textarea' && e.target.type !== 'button') {\n      handleSave();\n    } else if (e.keyCode === 13 && e.target.type === 'textarea' && e.shiftKey) {\n      handleSave();\n    } else if (e.keyCode === 27) {\n      props.onEditingCanceled(props.mode, props.data);\n    }\n  };\n\n  function render() {\n    var size = CommonValues.elementSize(props);\n\n    var localization = _objectSpread(_objectSpread({}, MTableEditRow.defaultProps.localization), props.localization);\n\n    var columns;\n\n    if (props.mode === 'add' || props.mode === 'update' || props.mode === 'bulk') {\n      columns = renderColumns();\n    } else {\n      var colSpan = props.columns.filter(function (columnDef) {\n        return !columnDef.hidden && !(columnDef.tableData.groupOrder > -1);\n      }).length;\n      columns = [/*#__PURE__*/_react[\"default\"].createElement(_TableCell[\"default\"], {\n        size: size,\n        padding: props.options.actionsColumnIndex === 0 ? 'none' : undefined,\n        key: \"key-edit-cell\",\n        colSpan: colSpan\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Typography[\"default\"], {\n        variant: \"h6\"\n      }, localization.deleteText))];\n    }\n\n    if (props.options.selection) {\n      columns.splice(0, 0, /*#__PURE__*/_react[\"default\"].createElement(_TableCell[\"default\"], {\n        padding: \"none\",\n        key: \"key-selection-cell\"\n      }));\n    }\n\n    if (props.isTreeData) {\n      columns.splice(0, 0, /*#__PURE__*/_react[\"default\"].createElement(_TableCell[\"default\"], {\n        padding: \"none\",\n        key: \"key-tree-data-cell\"\n      }));\n    }\n\n    if (props.options.actionsColumnIndex === -1) {\n      columns.push(renderActions());\n    } else if (props.options.actionsColumnIndex >= 0) {\n      var endPos = 0;\n\n      if (props.options.selection) {\n        endPos = 1;\n      }\n\n      if (props.isTreeData) {\n        endPos = 1;\n\n        if (props.options.selection) {\n          columns.splice(1, 1);\n        }\n      }\n\n      columns.splice(props.options.actionsColumnIndex + endPos, 0, renderActions());\n    } // Lastly we add detail panel icon\n\n\n    if (props.detailPanel && props.mode !== 'bulk') {\n      var alignment = props.options.detailPanelColumnAlignment;\n      var index = alignment === 'left' ? 0 : columns.length;\n      columns.splice(index, 0, /*#__PURE__*/_react[\"default\"].createElement(_TableCell[\"default\"], {\n        padding: \"none\",\n        key: \"key-detail-panel-cell\"\n      }));\n    }\n\n    props.columns.filter(function (columnDef) {\n      return columnDef.tableData.groupOrder > -1;\n    }).forEach(function (columnDef) {\n      columns.splice(0, 0, /*#__PURE__*/_react[\"default\"].createElement(_TableCell[\"default\"], {\n        padding: \"none\",\n        key: 'key-group-cell' + columnDef.tableData.id\n      }));\n    });\n    var detailPanel = props.detailPanel,\n        isTreeData = props.isTreeData,\n        onRowClick = props.onRowClick,\n        onRowSelected = props.onRowSelected,\n        onTreeExpandChanged = props.onTreeExpandChanged,\n        onToggleDetailPanel = props.onToggleDetailPanel,\n        onEditingApproved = props.onEditingApproved,\n        onEditingCanceled = props.onEditingCanceled,\n        getFieldValue = props.getFieldValue,\n        components = props.components,\n        icons = props.icons,\n        columnsProp = props.columns,\n        localizationProp = props.localization,\n        options = props.options,\n        actions = props.actions,\n        errorState = props.errorState,\n        onBulkEditRowChanged = props.onBulkEditRowChanged,\n        bulkEditChangedRows = props.bulkEditChangedRows,\n        scrollWidth = props.scrollWidth,\n        forwardedRef = props.forwardedRef,\n        rowProps = (0, _objectWithoutProperties2[\"default\"])(props, [\"detailPanel\", \"isTreeData\", \"onRowClick\", \"onRowSelected\", \"onTreeExpandChanged\", \"onToggleDetailPanel\", \"onEditingApproved\", \"onEditingCanceled\", \"getFieldValue\", \"components\", \"icons\", \"columns\", \"localization\", \"options\", \"actions\", \"errorState\", \"onBulkEditRowChanged\", \"bulkEditChangedRows\", \"scrollWidth\", \"forwardedRef\"]);\n    return /*#__PURE__*/_react[\"default\"].createElement(_TableRow[\"default\"], (0, _extends2[\"default\"])({\n      onKeyDown: handleKeyDown\n    }, rowProps, {\n      ref: forwardedRef,\n      style: getStyle()\n    }), columns);\n  }\n\n  return render();\n}\n\nMTableEditRow.defaultProps = {\n  actions: [],\n  index: 0,\n  options: {},\n  path: [],\n  localization: {\n    saveTooltip: 'Save',\n    cancelTooltip: 'Cancel',\n    deleteText: 'Are you sure you want to delete this row?'\n  },\n  onBulkEditRowChanged: function onBulkEditRowChanged() {}\n};\nMTableEditRow.propTypes = {\n  actions: _propTypes[\"default\"].array,\n  icons: _propTypes[\"default\"].any.isRequired,\n  index: _propTypes[\"default\"].number.isRequired,\n  data: _propTypes[\"default\"].object,\n  detailPanel: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].func, _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].oneOfType([_propTypes[\"default\"].object, _propTypes[\"default\"].func]))]),\n  options: _propTypes[\"default\"].object.isRequired,\n  onRowSelected: _propTypes[\"default\"].func,\n  path: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].number),\n  columns: _propTypes[\"default\"].array,\n  onRowClick: _propTypes[\"default\"].func,\n  onEditingApproved: _propTypes[\"default\"].func,\n  onEditingCanceled: _propTypes[\"default\"].func,\n  localization: _propTypes[\"default\"].object,\n  getFieldValue: _propTypes[\"default\"].func,\n  errorState: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].object, _propTypes[\"default\"].bool]),\n  onBulkEditRowChanged: _propTypes[\"default\"].func\n};\n\nvar _default = /*#__PURE__*/_react[\"default\"].forwardRef(function MTableWithRefEditRow(props, ref) {\n  return /*#__PURE__*/_react[\"default\"].createElement(MTableEditRow, (0, _extends2[\"default\"])({}, props, {\n    forwardedRef: ref\n  }));\n});\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["C:/Users/ADMIN DEP IT/Documents/NetBeansProjects/talleresfront/node_modules/@material-table/core/dist/components/MTableEditRow/index.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","_extends2","_objectWithoutProperties2","_defineProperty2","_slicedToArray2","_react","_TableCell","_TableRow","_Typography","_propTypes","_utils","CommonValues","_validate","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","MTableEditRow","props","_useState","useState","createRowData","columns","column","field","reduce","prev","initialEditValue","data","JSON","parse","stringify","mode","bulkEditChangedRows","tableData","id","newData","_useState2","state","setState","renderColumns","size","elementSize","mapArr","columnDef","hidden","groupOrder","sort","a","b","columnOrder","map","index","byString","getCellStyle","cellStyle","color","disableClick","cursor","style","paddingLeft","level","allowEditing","editable","undefined","readonlyValue","getFieldValue","createElement","components","Cell","icons","rowData","editComponent","cellProps","EditComponent","EditField","error","validateInput","align","indexOf","type","isValid","helperText","locale","localization","dateTimePickerLocalization","onChange","setByString","onBulkEditRowChanged","onRowDataChange","handleSave","onEditingApproved","renderActions","defaultProps","every","actions","icon","Check","tooltip","saveTooltip","disabled","onClick","Clear","cancelTooltip","onEditingCanceled","padding","width","options","editCellStyle","Actions","getStyle","borderBottom","handleKeyDown","e","keyCode","shiftKey","render","colSpan","actionsColumnIndex","variant","deleteText","selection","splice","isTreeData","endPos","detailPanel","alignment","detailPanelColumnAlignment","onRowClick","onRowSelected","onTreeExpandChanged","onToggleDetailPanel","columnsProp","localizationProp","errorState","scrollWidth","forwardedRef","rowProps","onKeyDown","ref","path","propTypes","array","any","isRequired","number","oneOfType","func","arrayOf","bool","_default","forwardRef","MTableWithRefEditRow"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _TableCell = _interopRequireDefault(require(\"@material-ui/core/TableCell\"));\n\nvar _TableRow = _interopRequireDefault(require(\"@material-ui/core/TableRow\"));\n\nvar _Typography = _interopRequireDefault(require(\"@material-ui/core/Typography\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _utils = require(\"../../utils\");\n\nvar CommonValues = _interopRequireWildcard(require(\"../../utils/common-values\"));\n\nvar _validate = require(\"../../utils/validate\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction MTableEditRow(props) {\n  var _useState = (0, _react.useState)(function () {\n    function createRowData() {\n      return props.columns.filter(function (column) {\n        return 'initialEditValue' in column && column.field;\n      }).reduce(function (prev, column) {\n        prev[column.field] = column.initialEditValue;\n        return prev;\n      }, {});\n    }\n\n    var data = props.data ? JSON.parse(JSON.stringify(props.data)) : createRowData();\n\n    if (props.mode === 'bulk' && props.bulkEditChangedRows[data.tableData.id]) {\n      data = props.bulkEditChangedRows[data.tableData.id].newData;\n    }\n\n    return {\n      data: data\n    };\n  }),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  function renderColumns() {\n    var size = CommonValues.elementSize(props);\n    var mapArr = props.columns.filter(function (columnDef) {\n      return !columnDef.hidden && !(columnDef.tableData.groupOrder > -1);\n    }).sort(function (a, b) {\n      return a.tableData.columnOrder - b.tableData.columnOrder;\n    }).map(function (columnDef, index) {\n      var value = typeof state.data[columnDef.field] !== 'undefined' ? state.data[columnDef.field] : (0, _utils.byString)(state.data, columnDef.field);\n\n      var getCellStyle = function getCellStyle(columnDef, value) {\n        var cellStyle = {\n          color: 'inherit'\n        };\n\n        if (typeof columnDef.cellStyle === 'function') {\n          cellStyle = _objectSpread(_objectSpread({}, cellStyle), columnDef.cellStyle(value, props.data));\n        } else {\n          cellStyle = _objectSpread(_objectSpread({}, cellStyle), columnDef.cellStyle);\n        }\n\n        if (columnDef.disableClick) {\n          cellStyle.cursor = 'default';\n        }\n\n        return _objectSpread({}, cellStyle);\n      };\n\n      var style = {};\n\n      if (index === 0) {\n        style.paddingLeft = 24 + props.level * 20;\n      }\n\n      var allowEditing = false;\n\n      if (columnDef.editable === undefined) {\n        allowEditing = true;\n      }\n\n      if (columnDef.editable === 'always') {\n        allowEditing = true;\n      }\n\n      if (columnDef.editable === 'onAdd' && props.mode === 'add') {\n        allowEditing = true;\n      }\n\n      if (columnDef.editable === 'onUpdate' && props.mode === 'update') {\n        allowEditing = true;\n      }\n\n      if (typeof columnDef.editable === 'function') {\n        allowEditing = columnDef.editable(columnDef, props.data);\n      }\n\n      if (!columnDef.field || !allowEditing) {\n        var readonlyValue = props.getFieldValue(state.data, columnDef);\n        return /*#__PURE__*/_react[\"default\"].createElement(props.components.Cell, {\n          size: size,\n          icons: props.icons,\n          columnDef: columnDef,\n          value: readonlyValue,\n          key: columnDef.tableData.id,\n          rowData: props.data,\n          style: getCellStyle(columnDef, value)\n        });\n      } else {\n        var editComponent = columnDef.editComponent,\n            cellProps = (0, _objectWithoutProperties2[\"default\"])(columnDef, [\"editComponent\"]);\n        var EditComponent = editComponent || props.components.EditField;\n        var error = (0, _validate.validateInput)(columnDef, state.data);\n        return /*#__PURE__*/_react[\"default\"].createElement(_TableCell[\"default\"], {\n          size: size,\n          key: columnDef.tableData.id,\n          align: ['numeric'].indexOf(columnDef.type) !== -1 ? 'right' : 'left',\n          style: getCellStyle(columnDef, value)\n        }, /*#__PURE__*/_react[\"default\"].createElement(EditComponent, {\n          key: columnDef.tableData.id,\n          columnDef: cellProps,\n          value: value,\n          error: !error.isValid,\n          helperText: error.helperText,\n          locale: props.localization.dateTimePickerLocalization,\n          rowData: state.data,\n          onChange: function onChange(value) {\n            var data = _objectSpread({}, state.data);\n\n            (0, _utils.setByString)(data, columnDef.field, value); // data[columnDef.field] = value;\n\n            setState({\n              data: data\n            });\n\n            if (props.onBulkEditRowChanged) {\n              props.onBulkEditRowChanged(props.data, data);\n            }\n          },\n          onRowDataChange: function onRowDataChange(data) {\n            setState({\n              data: data\n            });\n\n            if (props.onBulkEditRowChanged) {\n              props.onBulkEditRowChanged(props.data, data);\n            }\n          }\n        }));\n      }\n    });\n    return mapArr;\n  }\n\n  var handleSave = function handleSave() {\n    var newData = state.data;\n    delete newData.tableData;\n    props.onEditingApproved(props.mode, state.data, props.data);\n  };\n\n  function renderActions() {\n    if (props.mode === 'bulk') {\n      return;\n    }\n\n    var size = CommonValues.elementSize(props);\n\n    var localization = _objectSpread(_objectSpread({}, MTableEditRow.defaultProps.localization), props.localization);\n\n    var isValid = props.columns.every(function (column) {\n      var error = (0, _validate.validateInput)(column, state.data);\n      return error.isValid;\n    });\n    var actions = [{\n      icon: props.icons.Check,\n      tooltip: localization.saveTooltip,\n      disabled: !isValid,\n      onClick: handleSave\n    }, {\n      icon: props.icons.Clear,\n      tooltip: localization.cancelTooltip,\n      onClick: function onClick() {\n        props.onEditingCanceled(props.mode, props.data);\n      }\n    }];\n    return /*#__PURE__*/_react[\"default\"].createElement(_TableCell[\"default\"], {\n      size: size,\n      padding: \"none\",\n      key: \"key-actions-column\",\n      style: _objectSpread({\n        width: 42 * actions.length,\n        padding: '0px 5px'\n      }, props.options.editCellStyle)\n    }, /*#__PURE__*/_react[\"default\"].createElement(props.components.Actions, {\n      data: props.data,\n      actions: actions,\n      components: props.components,\n      size: size\n    }));\n  }\n\n  function getStyle() {\n    var style = {\n      // boxShadow: '1px 1px 1px 1px rgba(0,0,0,0.2)',\n      borderBottom: '1px solid red'\n    };\n    return style;\n  }\n\n  var handleKeyDown = function handleKeyDown(e) {\n    if (e.keyCode === 13 && e.target.type !== 'textarea' && e.target.type !== 'button') {\n      handleSave();\n    } else if (e.keyCode === 13 && e.target.type === 'textarea' && e.shiftKey) {\n      handleSave();\n    } else if (e.keyCode === 27) {\n      props.onEditingCanceled(props.mode, props.data);\n    }\n  };\n\n  function render() {\n    var size = CommonValues.elementSize(props);\n\n    var localization = _objectSpread(_objectSpread({}, MTableEditRow.defaultProps.localization), props.localization);\n\n    var columns;\n\n    if (props.mode === 'add' || props.mode === 'update' || props.mode === 'bulk') {\n      columns = renderColumns();\n    } else {\n      var colSpan = props.columns.filter(function (columnDef) {\n        return !columnDef.hidden && !(columnDef.tableData.groupOrder > -1);\n      }).length;\n      columns = [/*#__PURE__*/_react[\"default\"].createElement(_TableCell[\"default\"], {\n        size: size,\n        padding: props.options.actionsColumnIndex === 0 ? 'none' : undefined,\n        key: \"key-edit-cell\",\n        colSpan: colSpan\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Typography[\"default\"], {\n        variant: \"h6\"\n      }, localization.deleteText))];\n    }\n\n    if (props.options.selection) {\n      columns.splice(0, 0, /*#__PURE__*/_react[\"default\"].createElement(_TableCell[\"default\"], {\n        padding: \"none\",\n        key: \"key-selection-cell\"\n      }));\n    }\n\n    if (props.isTreeData) {\n      columns.splice(0, 0, /*#__PURE__*/_react[\"default\"].createElement(_TableCell[\"default\"], {\n        padding: \"none\",\n        key: \"key-tree-data-cell\"\n      }));\n    }\n\n    if (props.options.actionsColumnIndex === -1) {\n      columns.push(renderActions());\n    } else if (props.options.actionsColumnIndex >= 0) {\n      var endPos = 0;\n\n      if (props.options.selection) {\n        endPos = 1;\n      }\n\n      if (props.isTreeData) {\n        endPos = 1;\n\n        if (props.options.selection) {\n          columns.splice(1, 1);\n        }\n      }\n\n      columns.splice(props.options.actionsColumnIndex + endPos, 0, renderActions());\n    } // Lastly we add detail panel icon\n\n\n    if (props.detailPanel && props.mode !== 'bulk') {\n      var alignment = props.options.detailPanelColumnAlignment;\n      var index = alignment === 'left' ? 0 : columns.length;\n      columns.splice(index, 0, /*#__PURE__*/_react[\"default\"].createElement(_TableCell[\"default\"], {\n        padding: \"none\",\n        key: \"key-detail-panel-cell\"\n      }));\n    }\n\n    props.columns.filter(function (columnDef) {\n      return columnDef.tableData.groupOrder > -1;\n    }).forEach(function (columnDef) {\n      columns.splice(0, 0, /*#__PURE__*/_react[\"default\"].createElement(_TableCell[\"default\"], {\n        padding: \"none\",\n        key: 'key-group-cell' + columnDef.tableData.id\n      }));\n    });\n    var detailPanel = props.detailPanel,\n        isTreeData = props.isTreeData,\n        onRowClick = props.onRowClick,\n        onRowSelected = props.onRowSelected,\n        onTreeExpandChanged = props.onTreeExpandChanged,\n        onToggleDetailPanel = props.onToggleDetailPanel,\n        onEditingApproved = props.onEditingApproved,\n        onEditingCanceled = props.onEditingCanceled,\n        getFieldValue = props.getFieldValue,\n        components = props.components,\n        icons = props.icons,\n        columnsProp = props.columns,\n        localizationProp = props.localization,\n        options = props.options,\n        actions = props.actions,\n        errorState = props.errorState,\n        onBulkEditRowChanged = props.onBulkEditRowChanged,\n        bulkEditChangedRows = props.bulkEditChangedRows,\n        scrollWidth = props.scrollWidth,\n        forwardedRef = props.forwardedRef,\n        rowProps = (0, _objectWithoutProperties2[\"default\"])(props, [\"detailPanel\", \"isTreeData\", \"onRowClick\", \"onRowSelected\", \"onTreeExpandChanged\", \"onToggleDetailPanel\", \"onEditingApproved\", \"onEditingCanceled\", \"getFieldValue\", \"components\", \"icons\", \"columns\", \"localization\", \"options\", \"actions\", \"errorState\", \"onBulkEditRowChanged\", \"bulkEditChangedRows\", \"scrollWidth\", \"forwardedRef\"]);\n    return /*#__PURE__*/_react[\"default\"].createElement(_TableRow[\"default\"], (0, _extends2[\"default\"])({\n      onKeyDown: handleKeyDown\n    }, rowProps, {\n      ref: forwardedRef,\n      style: getStyle()\n    }), columns);\n  }\n\n  return render();\n}\n\nMTableEditRow.defaultProps = {\n  actions: [],\n  index: 0,\n  options: {},\n  path: [],\n  localization: {\n    saveTooltip: 'Save',\n    cancelTooltip: 'Cancel',\n    deleteText: 'Are you sure you want to delete this row?'\n  },\n  onBulkEditRowChanged: function onBulkEditRowChanged() {}\n};\nMTableEditRow.propTypes = {\n  actions: _propTypes[\"default\"].array,\n  icons: _propTypes[\"default\"].any.isRequired,\n  index: _propTypes[\"default\"].number.isRequired,\n  data: _propTypes[\"default\"].object,\n  detailPanel: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].func, _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].oneOfType([_propTypes[\"default\"].object, _propTypes[\"default\"].func]))]),\n  options: _propTypes[\"default\"].object.isRequired,\n  onRowSelected: _propTypes[\"default\"].func,\n  path: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].number),\n  columns: _propTypes[\"default\"].array,\n  onRowClick: _propTypes[\"default\"].func,\n  onEditingApproved: _propTypes[\"default\"].func,\n  onEditingCanceled: _propTypes[\"default\"].func,\n  localization: _propTypes[\"default\"].object,\n  getFieldValue: _propTypes[\"default\"].func,\n  errorState: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].object, _propTypes[\"default\"].bool]),\n  onBulkEditRowChanged: _propTypes[\"default\"].func\n};\n\nvar _default = /*#__PURE__*/_react[\"default\"].forwardRef(function MTableWithRefEditRow(props, ref) {\n  return /*#__PURE__*/_react[\"default\"].createElement(MTableEditRow, (0, _extends2[\"default\"])({}, props, {\n    forwardedRef: ref\n  }));\n});\n\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}