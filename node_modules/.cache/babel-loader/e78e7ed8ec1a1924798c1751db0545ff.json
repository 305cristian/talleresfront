{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN DEP IT\\\\Documents\\\\NetBeansProjects\\\\talleresfront\\\\src\\\\components\\\\Evaluacion.js\";\nimport React, { Component } from 'react';\nimport { Container, Button, Modal } from 'reactstrap';\nimport { render } from 'react-dom';\nimport { Link, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faChevronCircleRight, faFeatherAlt, faClock } from '@fortawesome/free-solid-svg-icons';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  REACT_APP_HOST\n} = process.env;\nvar resp_correcta = [];\nvar puntaje_list = [];\nvar cont_correctas = 0;\nvar cont_incorrectas = 0;\nvar punt = 0;\nvar puntuacion = 0;\nvar a = 0;\nvar pts = 0;\nvar sum_pts = 0;\nvar intervaloCont = '';\nvar hora = 0;\nvar minutos = 0;\nvar segundos = 59;\nvar estado_tiempo = true;\n\nclass Evaluacion extends Component {\n  constructor() {\n    super();\n    this.state = {\n      preguntas_respuestas: [],\n      resultados: false,\n      deshabilitar: false,\n      modalOpen: false,\n      intentos: '',\n      tiempo: ''\n    };\n    this.cargarSegundos = this.cargarSegundos.bind(this);\n    this.cargarMinutos = this.cargarMinutos.bind(this);\n    this.cargarHora = this.cargarHora.bind(this);\n  }\n\n  componentDidMount() {\n    this.getPreguntasRespuestas();\n    setInterval(this.cargarSegundos, 1000);\n  }\n\n  getPreguntasRespuestas() {\n    const {\n      match\n    } = this.props;\n    const id_taller = match.params.id;\n    axios.get(`${REACT_APP_HOST}/api/evaluacion/` + id_taller).then(response => {\n      this.setState({\n        preguntas_respuestas: response.data\n      });\n      this.mostarEvaluacion();\n    });\n  }\n\n  mostarEvaluacion() {\n    const contenedor_eval = document.getElementById('contenedor_eval');\n    const preguntasYrespuestas = [];\n    this.state.preguntas_respuestas.map((preguntaAct, numPregunta) => {\n      const respuestas = [];\n      preguntaAct.respuestas.map((respuestaAct, numRespuesta) => {\n        respuestas.push(`<label><input type=\"radio\"  name=\"${numPregunta}\" value=\"${respuestaAct.respuesta}\"/> ${respuestaAct.respuesta}</label><br/> `);\n\n        if (respuestaAct.estadoresp === true) {\n          resp_correcta.push(`${respuestaAct.respuesta}`);\n        }\n      });\n      preguntasYrespuestas.push(`\n                        <div class=\"font-weight-bold\">${numPregunta + 1 + ':'} ${preguntaAct.pregunta} (${preguntaAct.puntaje}pts.)</div>\n                        <div class=\"respuestas pl-4 pt-2\">${respuestas.join('')}</div><hr/>\n                    `);\n      puntaje_list.push(preguntaAct.puntaje);\n      preguntaAct.taller.map((taller, index) => {\n        minutos = taller.tiempo - 1; //                this.setState({intentos: taller.intentos, tiempo: taller.tiempo})\n      });\n    });\n    this.pintarTiempo(minutos);\n    contenedor_eval.innerHTML = preguntasYrespuestas.join('');\n  }\n\n  pintarTiempo() {\n    alert(minutos);\n\n    while (estado_tiempo) {\n      if (minutos > 60) {\n        hora++;\n        minutos = minutos - 60;\n      }\n    }\n  }\n\n  validarRespuestas() {\n    cont_correctas = 0;\n    cont_incorrectas = 0;\n    const respuestas = document.querySelectorAll('.respuestas');\n    let estado = true;\n    this.state.preguntas_respuestas.map((respuestaAct, indexPreg) => {\n      const resp_x_preguntas = respuestas[indexPreg]; //agarro todos los input radio de la pregunta\n\n      const checkSelect = `input[name='${indexPreg}']:checked`; //agarro el input radio seleccionado\n\n      const resp_elegida = (resp_x_preguntas.querySelector(checkSelect) || {}).value; // de todas las resp_x_preguntas escogeme el chequeado\n      //            alert(resp_elegida + ':  ' + resp_correcta[indexPreg]);\n\n      if (resp_elegida !== undefined) {\n        if (resp_elegida === resp_correcta[indexPreg]) {\n          cont_correctas++;\n          sum_pts = this.sumarPuntaje(indexPreg);\n          this.pintarRespuestas(indexPreg, resp_correcta[indexPreg]);\n        } else {\n          cont_incorrectas++;\n          this.pintarRespuestas(indexPreg, resp_correcta[indexPreg]);\n        }\n      } else {\n        estado = false;\n        cont_correctas = 0;\n        cont_incorrectas = 0;\n        alert(`La pregunta ${indexPreg + 1} esta sin seleccionar`);\n      }\n    });\n\n    if (estado) {\n      //basta con que haya una respuesta desselecionada para que entre al estado false y ejecute el metodo despintarRespuestas\n      this.setState({\n        resultados: true,\n        deshabilitar: true\n      });\n      this.bloquearRespuestas();\n    } else {\n      for (var i = 0; i < this.state.preguntas_respuestas.length; i++) {\n        this.despintarRespuestas(i);\n      }\n    }\n\n    const acmd = puntaje_list.reduce((a, b) => a + b);\n    punt = sum_pts * 10 / acmd;\n    puntuacion = Math.round(punt); //        \n  }\n\n  sumarPuntaje(index) {\n    a = puntaje_list[index];\n    pts += a;\n    return pts;\n  }\n\n  pintarRespuestas(indexResp, resp_Correcta) {\n    const radios = document.getElementsByName(indexResp);\n\n    for (var i = 0; i < radios.length; i++) {\n      var radioCheckeado = radios[i].checked;\n\n      if (radioCheckeado === true) {\n        var respCheackeado = radios[i].value; //                var labelRadio = document.querySelector(`${indexResp}`).parentNode;\n\n        const labelRadio = document.querySelector(`input[name=\"${indexResp}\"]:checked`).parentNode; //Accede a los radios que tengan el nombre indexResp, verifica el que esta checheado y traeme el elemento padre\n\n        if (respCheackeado === resp_Correcta) {\n          labelRadio.style.color = 'green';\n          labelRadio.classList.add('font-weight-bold'); //                    labelRadio.classList.add('bg-success');\n          //                    labelRadio.classList.add('p-1');\n        } else {\n          labelRadio.style.color = 'red';\n          labelRadio.classList.add('font-weight-bold'); //                    labelRadio.classList.add('p-1');\n        }\n      }\n    }\n  }\n\n  despintarRespuestas(index) {\n    const radios = document.getElementsByName(index);\n\n    for (var i = 0; i < radios.length; i++) {\n      const labelradio = radios[i].parentNode;\n      labelradio.style.color = 'black';\n      labelradio.classList.remove('font-weight-bold');\n      labelradio.classList.add('font-weight-normal');\n    }\n  }\n\n  bloquearRespuestas() {\n    const respuestas = document.getElementsByTagName('label');\n\n    for (var i = 0; i < respuestas.length; i++) {\n      const radios = document.getElementsByTagName('input');\n      radios[i].disabled = true;\n    }\n  }\n\n  showModalResp() {\n    this.setState({\n      modalOpen: true\n    });\n  }\n\n  hideModal() {\n    this.setState({\n      modalOpen: false\n    });\n  }\n\n  cargarSegundos() {\n    let txt_segundo;\n\n    if (segundos < 0) {\n      segundos = 59;\n    } //pintamos en pantalla\n\n\n    if (segundos < 10) {\n      txt_segundo = `0${segundos}`;\n    } else {\n      txt_segundo = segundos;\n    }\n\n    document.getElementById('segundo').innerHTML = ' : ' + txt_segundo;\n    segundos--;\n    this.cargarMinutos(segundos);\n  }\n\n  cargarMinutos(segundos) {\n    let txt_minuto;\n\n    if (segundos === -1 && minutos !== 0) {\n      setTimeout(() => {\n        minutos--;\n      }, 500);\n    } else {\n      if (segundos === -1 && minutos === 0) {\n        setTimeout(() => {\n          minutos = 59;\n        }, 500);\n      }\n    } //pintamos en pantalla\n\n\n    if (minutos < 10) {\n      txt_minuto = `0${minutos}`;\n    } else {\n      txt_minuto = minutos;\n    }\n\n    document.getElementById('minuto').innerHTML = ' : ' + txt_minuto;\n    this.cargarHora(segundos, minutos);\n  }\n\n  cargarHora(segundo, minuto) {\n    let txtHora;\n\n    if (segundo === -1 && minuto === 0 && hora !== 0) {\n      setTimeout(() => {\n        hora--;\n      }, 500);\n    } else {\n      if (segundo === -1 && minuto === 0 && hora === 0) {\n        setTimeout(() => {\n          hora = 24;\n        }, 500);\n      }\n    } //Pintar la hora\n\n\n    if (hora < 10) {\n      txtHora = `0${hora}`;\n    } else {\n      txtHora = hora;\n    }\n\n    document.getElementById('hora').innerHTML = txtHora;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" container col-md-10 bg-primary text-white\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-10\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"p-2\",\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faFeatherAlt\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 53\n              }, this), \" Evaluaci\\xF3n\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-2 py-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border text-center p-2 bg-info font-weight-bold\",\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faClock\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 37\n              }, this), ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n                id: \"hora\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                id: \"minuto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                id: \"segundo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container col-md-10 border p-4\",\n        id: \"contenedor_eval\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container bg-primary clearfix  col-md-10 p-2 \",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-danger float-right\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            disabled: this.state.deshabilitar,\n            onClick: () => {\n              this.validarRespuestas();\n            },\n            size: \"sm\",\n            color: \"success\",\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faChevronCircleRight\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 70\n            }, this), \" Calificar\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 21\n      }, this), this.state.resultados ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container col-md-7 border p-4 my-5\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-success container text-center p-1\",\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"font-weight-bold text-white\",\n              children: [\"Respuestas Correctas: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                children: cont_correctas\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 118\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 45\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-danger container text-center p-1 my-2\",\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"font-weight-bold text-white\",\n              children: [\"Respuestas Incorrectas: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                children: cont_incorrectas\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 120\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 45\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-primary container text-center p-1 my-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"font-weight-bold text-white\",\n                children: [\"Su Puntuaci\\xF3n es: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [puntuacion, \"/10\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 118\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 53\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 49\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"text-white\",\n                onClick: () => {\n                  this.showModalResp();\n                },\n                href: \"#\",\n                style: {\n                  fontSize: 13\n                },\n                children: \"Ver Respuestas\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 53\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 49\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 45\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \" container text-center p-1 my-2\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              size: \"xs\",\n              color: \"primary\",\n              children: \"Enviar Resultados\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 45\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 37\n      }, this) : null, /*#__PURE__*/_jsxDEV(Modal, {\n        size: \"lg\",\n        isOpen: this.state.modalOpen,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-11\",\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"p-2 pl-3\",\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faFeatherAlt\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 58\n              }, this), \" Respuestas Correctas\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-1 my-2\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              size: \"sm\",\n              onClick: () => {\n                this.hideModal();\n              },\n              children: \"X\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container border p-3\",\n          id: \"contenedor_resp_correctas\",\n          children: this.state.preguntas_respuestas.map((preg, index) => {\n            return /*#__PURE__*/_jsxDEV(Container, {\n              children: [/*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"font-weight-bold\",\n                children: [index + 1, ': ', preg.pregunta]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 50\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 127\n              }, this), preg.respuestas.map((resp, index) => {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"pl-4 pt-2\",\n                  children: resp.estadoresp ? /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"font-weight-bold\",\n                    style: {\n                      color: 'green'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      checked: true,\n                      disabled: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 353,\n                      columnNumber: 186\n                    }, this), \" \", resp.respuesta]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 353,\n                    columnNumber: 125\n                  }, this) : /*#__PURE__*/_jsxDEV(\"label\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      disabled: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 354,\n                      columnNumber: 123\n                    }, this), \" \", resp.respuesta]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 354,\n                    columnNumber: 115\n                  }, this)\n                }, resp._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 81\n                }, this);\n              })]\n            }, preg._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 41\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 17\n    }, this);\n  }\n\n}\n\nexport default Evaluacion;","map":{"version":3,"sources":["C:/Users/ADMIN DEP IT/Documents/NetBeansProjects/talleresfront/src/components/Evaluacion.js"],"names":["React","Component","Container","Button","Modal","render","Link","useParams","axios","FontAwesomeIcon","faChevronCircleRight","faFeatherAlt","faClock","REACT_APP_HOST","process","env","resp_correcta","puntaje_list","cont_correctas","cont_incorrectas","punt","puntuacion","a","pts","sum_pts","intervaloCont","hora","minutos","segundos","estado_tiempo","Evaluacion","constructor","state","preguntas_respuestas","resultados","deshabilitar","modalOpen","intentos","tiempo","cargarSegundos","bind","cargarMinutos","cargarHora","componentDidMount","getPreguntasRespuestas","setInterval","match","props","id_taller","params","id","get","then","response","setState","data","mostarEvaluacion","contenedor_eval","document","getElementById","preguntasYrespuestas","map","preguntaAct","numPregunta","respuestas","respuestaAct","numRespuesta","push","respuesta","estadoresp","pregunta","puntaje","join","taller","index","pintarTiempo","innerHTML","alert","validarRespuestas","querySelectorAll","estado","indexPreg","resp_x_preguntas","checkSelect","resp_elegida","querySelector","value","undefined","sumarPuntaje","pintarRespuestas","bloquearRespuestas","i","length","despintarRespuestas","acmd","reduce","b","Math","round","indexResp","resp_Correcta","radios","getElementsByName","radioCheckeado","checked","respCheackeado","labelRadio","parentNode","style","color","classList","add","labelradio","remove","getElementsByTagName","disabled","showModalResp","hideModal","txt_segundo","txt_minuto","setTimeout","segundo","minuto","txtHora","fontSize","preg","resp","_id"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Container, Button, Modal} from'reactstrap'\nimport {render}from 'react-dom';\nimport{Link, useParams} from'react-router-dom';\nimport axios from'axios';\nimport { FontAwesomeIcon }from '@fortawesome/react-fontawesome'\nimport {faChevronCircleRight, faFeatherAlt, faClock}from '@fortawesome/free-solid-svg-icons'\n\nimport 'bootstrap/dist/css/bootstrap.css';\n\nconst{REACT_APP_HOST} = process.env;\nvar resp_correcta = [];\nvar puntaje_list = [];\nvar cont_correctas = 0;\nvar cont_incorrectas = 0;\nvar punt = 0;\nvar puntuacion = 0;\n\nvar a = 0;\nvar pts = 0;\nvar sum_pts = 0;\n\nvar intervaloCont = '';\n\nvar hora = 0;\nvar minutos = 0;\nvar segundos = 59;\nvar estado_tiempo=true;\n\nclass Evaluacion extends Component {\n\n    constructor() {\n        super();\n        this.state = {\n            preguntas_respuestas: [],\n            resultados: false,\n            deshabilitar: false,\n            modalOpen: false,\n\n            intentos: '',\n            tiempo: ''\n        }\n        this.cargarSegundos = this.cargarSegundos.bind(this);\n        this.cargarMinutos = this.cargarMinutos.bind(this);\n        this.cargarHora = this.cargarHora.bind(this);\n\n    }\n\n    componentDidMount() {\n        this.getPreguntasRespuestas();\n        setInterval(this.cargarSegundos, 1000);\n\n    }\n\n    getPreguntasRespuestas() {\n        const {match} = this.props;\n        const id_taller = match.params.id;\n        axios.get(`${REACT_APP_HOST}/api/evaluacion/` + id_taller).then((response) => {\n            this.setState({preguntas_respuestas: response.data});\n            this.mostarEvaluacion();\n        });\n    }\n    mostarEvaluacion() {\n        const contenedor_eval = document.getElementById('contenedor_eval');\n        const preguntasYrespuestas = [];\n        this.state.preguntas_respuestas.map((preguntaAct, numPregunta) => {\n            const respuestas = [];\n            preguntaAct.respuestas.map((respuestaAct, numRespuesta) => {\n                respuestas.push(\n                        `<label><input type=\"radio\"  name=\"${numPregunta}\" value=\"${respuestaAct.respuesta}\"/> ${respuestaAct.respuesta}</label><br/> `\n                        );\n                if (respuestaAct.estadoresp === true) {\n                    resp_correcta.push(`${respuestaAct.respuesta}`);\n                }\n            });\n\n            preguntasYrespuestas.push(\n                    `\n                        <div class=\"font-weight-bold\">${numPregunta + 1 + ':'} ${preguntaAct.pregunta} (${preguntaAct.puntaje}pts.)</div>\n                        <div class=\"respuestas pl-4 pt-2\">${respuestas.join('')}</div><hr/>\n                    `\n                    );\n            puntaje_list.push(preguntaAct.puntaje);\n\n            preguntaAct.taller.map((taller, index) => {\n                minutos = taller.tiempo - 1;\n//                this.setState({intentos: taller.intentos, tiempo: taller.tiempo})\n            })\n        });\n        this.pintarTiempo(minutos);\n        contenedor_eval.innerHTML = preguntasYrespuestas.join('');\n\n    }\n\n    pintarTiempo() {\n        alert(minutos);\n        while (estado_tiempo) {\n            if (minutos > 60) {\n                hora++;\n                minutos = minutos - 60;\n            }\n        }\n\n    }\n    validarRespuestas() {\n        cont_correctas = 0;\n        cont_incorrectas = 0;\n        const respuestas = document.querySelectorAll('.respuestas');\n\n        let estado = true;\n\n        this.state.preguntas_respuestas.map((respuestaAct, indexPreg) => {\n            const resp_x_preguntas = respuestas[indexPreg];//agarro todos los input radio de la pregunta\n            const checkSelect = `input[name='${indexPreg}']:checked`; //agarro el input radio seleccionado\n            const resp_elegida = (resp_x_preguntas.querySelector(checkSelect) || {}).value; // de todas las resp_x_preguntas escogeme el chequeado\n//            alert(resp_elegida + ':  ' + resp_correcta[indexPreg]);\n            if (resp_elegida !== undefined) {\n                if (resp_elegida === resp_correcta[indexPreg]) {\n                    cont_correctas++;\n                    sum_pts = this.sumarPuntaje(indexPreg);\n                    this.pintarRespuestas(indexPreg, resp_correcta[indexPreg]);\n                } else {\n                    cont_incorrectas++;\n                    this.pintarRespuestas(indexPreg, resp_correcta[indexPreg]);\n                }\n            } else {\n                estado = false;\n                cont_correctas = 0;\n                cont_incorrectas = 0;\n                alert(`La pregunta ${indexPreg + 1} esta sin seleccionar`)\n            }\n\n        });\n        if (estado) {//basta con que haya una respuesta desselecionada para que entre al estado false y ejecute el metodo despintarRespuestas\n            this.setState({resultados: true, deshabilitar: true});\n            this.bloquearRespuestas();\n        } else {\n            for (var i = 0; i < this.state.preguntas_respuestas.length; i++) {\n                this.despintarRespuestas(i)\n            }\n        }\n        const acmd = puntaje_list.reduce((a, b) => a + b);\n        punt = sum_pts * 10 / acmd;\n        puntuacion = Math.round(punt);\n\n//        \n    }\n\n    sumarPuntaje(index) {\n        a = puntaje_list[index];\n        pts += a;\n        return pts;\n    }\n    pintarRespuestas(indexResp, resp_Correcta) {\n        const radios = document.getElementsByName(indexResp);\n        for (var i = 0; i < radios.length; i++) {\n            var radioCheckeado = radios[i].checked;\n            if (radioCheckeado === true) {\n                var respCheackeado = radios[i].value;\n//                var labelRadio = document.querySelector(`${indexResp}`).parentNode;\n                const labelRadio = document.querySelector(`input[name=\"${indexResp}\"]:checked`).parentNode;//Accede a los radios que tengan el nombre indexResp, verifica el que esta checheado y traeme el elemento padre\n                if (respCheackeado === resp_Correcta) {\n                    labelRadio.style.color = 'green';\n                    labelRadio.classList.add('font-weight-bold')\n//                    labelRadio.classList.add('bg-success');\n//                    labelRadio.classList.add('p-1');\n                } else {\n                    labelRadio.style.color = 'red';\n                    labelRadio.classList.add('font-weight-bold');\n//                    labelRadio.classList.add('p-1');\n\n                }\n            }\n        }\n    }\n    despintarRespuestas(index) {\n        const radios = document.getElementsByName(index);\n        for (var i = 0; i < radios.length; i++) {\n            const labelradio = radios[i].parentNode;\n            labelradio.style.color = 'black';\n            labelradio.classList.remove('font-weight-bold');\n            labelradio.classList.add('font-weight-normal');\n        }\n    }\n\n    bloquearRespuestas() {\n        const respuestas = document.getElementsByTagName('label');\n        for (var i = 0; i < respuestas.length; i++) {\n            const radios = document.getElementsByTagName('input');\n            radios[i].disabled = true;\n        }\n    }\n\n    showModalResp() {\n        this.setState({modalOpen: true});\n\n    }\n    hideModal() {\n        this.setState({modalOpen: false});\n    }\n\n    cargarSegundos() {\n        let txt_segundo;\n        if (segundos < 0) {\n            segundos = 59;\n        }\n\n        //pintamos en pantalla\n        if (segundos < 10) {\n            txt_segundo = `0${segundos}`;\n        } else {\n            txt_segundo = segundos;\n        }\n        document.getElementById('segundo').innerHTML = ' : ' + txt_segundo;\n        segundos--;\n\n        this.cargarMinutos(segundos);\n    }\n\n    cargarMinutos(segundos) {\n        let txt_minuto;\n        if (segundos === -1 && minutos !== 0) {\n            setTimeout(() => {\n                minutos--;\n            }, 500);\n        } else {\n            if (segundos === -1 && minutos === 0) {\n                setTimeout(() => {\n                    minutos = 59;\n                }, 500);\n            }\n        }\n        //pintamos en pantalla\n        if (minutos < 10) {\n            txt_minuto = `0${minutos}`;\n        } else {\n            txt_minuto = minutos;\n        }\n        document.getElementById('minuto').innerHTML = ' : ' + txt_minuto;\n\n        this.cargarHora(segundos, minutos);\n\n    }\n\n    cargarHora(segundo, minuto) {\n        let txtHora;\n        if (segundo === -1 && minuto === 0 && hora !== 0) {\n            setTimeout(() => {\n                hora--;\n            }, 500);\n        } else {\n            if (segundo === -1 && minuto === 0 && hora === 0) {\n                setTimeout(() => {\n                    hora = 24;\n                }, 500);\n            }\n        }\n\n        //Pintar la hora\n        if (hora < 10) {\n            txtHora = `0${hora}`;\n        } else {\n            txtHora = hora;\n        }\n\n        document.getElementById('hora').innerHTML = txtHora;\n\n    }\n\n    render() {\n        return(\n                <Container>\n                \n                    <div className=' container col-md-10 bg-primary text-white'>\n                        <div className=\"row\">\n                            <div className=\"col-md-10\">\n                                <h2 className=\"p-2\"><FontAwesomeIcon icon={faFeatherAlt}/> Evaluación</h2>               \n                            </div>\n                            <div className=\"col-md-2 py-2\">\n                                <div className=\"border text-center p-2 bg-info font-weight-bold\">\n                                    <FontAwesomeIcon icon={faClock}/>{' '}\n                                    <span id=\"hora\" ></span >\n                                    <span  id=\"minuto\"></span>\n                                    <span id=\"segundo\" ></span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className='container col-md-10 border p-4' id='contenedor_eval'>\n                \n                    </div>\n                    <div className='container bg-primary clearfix  col-md-10 p-2 '>\n                        <div className='bg-danger float-right'>\n                            <Button disabled={this.state.deshabilitar} onClick={() => {\n                                    this.validarRespuestas();\n\n                                        }} size='sm' color='success'><FontAwesomeIcon icon={faChevronCircleRight}/> Calificar</Button>\n                        </div>\n                    </div>\n                    { this.state.resultados ?\n                                    <div className=\"container col-md-7 border p-4 my-5\">\n                                        <form >\n                                            <div  className=\"bg-success container text-center p-1\">\n                                                <label className=\"font-weight-bold text-white\">Respuestas Correctas: <span>{cont_correctas}</span></label>\n                                            </div>\n                                \n                                            <div  className=\"bg-danger container text-center p-1 my-2\">\n                                                <label className=\"font-weight-bold text-white\">Respuestas Incorrectas: <span>{cont_incorrectas}</span></label>\n                                            </div>\n                                \n                                            <div  className=\"bg-primary container text-center p-1 my-2\">\n                                                <div>\n                                                    <label className=\"font-weight-bold text-white\">Su Puntuación es: <span>{puntuacion}/10</span></label>                \n                                                </div>\n                                                <div>\n                                                    <a className='text-white' onClick={() => {\n                                                                this.showModalResp();\n                                                               }} href=\"#\" style={{fontSize: 13}}>Ver Respuestas</a>              \n                                                </div>\n                                            </div>\n                                \n                                            <div  className=\" container text-center p-1 my-2\">\n                                                <Button size=\"xs\" color='primary'>Enviar Resultados</Button>\n                                            </div>\n                                        </form>\n                                \n                                    </div>\n\n                                : null}\n                \n                    <Modal size='lg' isOpen={this.state.modalOpen}>\n                \n                        <div className='row'>\n                            <div className='col-md-11'>\n                                <h3 className='p-2 pl-3'><FontAwesomeIcon icon={faFeatherAlt}/> Respuestas Correctas</h3>               \n                            </div>\n                            <div className='col-md-1 my-2'>\n                                <Button size='sm' onClick={() => {\n                                        this.hideModal()\n                                            }}>X</Button>                \n                            </div>\n                        </div>\n                        <div className='container border p-3' id='contenedor_resp_correctas'>\n                            {\n                                this.state.preguntas_respuestas.map((preg, index) => {\n                                    return(\n                                        <Container key={preg._id} >                           \n                                            <hr/><label  className='font-weight-bold'>{index + 1}{': '}{preg.pregunta}</label><br/> \n                                            { preg.respuestas.map((resp, index) => {\n                                                                        return(\n                                                                                <div key={resp._id} className=\"pl-4 pt-2\">\n                                                                                    {resp.estadoresp ?\n                                                                                                                            <label className='font-weight-bold' style={{color: 'green'}}><input type='radio' checked disabled/> {resp.respuesta}</label>\n                                                                                                                : <label ><input  type='radio' disabled/> {resp.respuesta}</label>\n                                                                                    }\n                                                                \n                                                                                </div>\n\n                                                                                )\n                                                                    })}\n                                        </Container>\n                                            )\n\n                                })\n                            }\n                        </div>\n                    </Modal>\n                </Container>\n                );\n    }\n}\n\nexport default Evaluacion;\n\n\n"]},"metadata":{},"sourceType":"module"}