{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _format = _interopRequireDefault(require(\"date-fns/format\"));\n\nvar _uuid = _interopRequireDefault(require(\"uuid\"));\n\nvar _2 = require(\"./\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar DataManager = /*#__PURE__*/function () {\n  function DataManager() {\n    var _this = this;\n\n    (0, _classCallCheck2[\"default\"])(this, DataManager);\n    (0, _defineProperty2[\"default\"])(this, \"checkForId\", false);\n    (0, _defineProperty2[\"default\"])(this, \"applyFilters\", false);\n    (0, _defineProperty2[\"default\"])(this, \"applySearch\", false);\n    (0, _defineProperty2[\"default\"])(this, \"applySort\", false);\n    (0, _defineProperty2[\"default\"])(this, \"currentPage\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"detailPanelType\", 'multiple');\n    (0, _defineProperty2[\"default\"])(this, \"lastDetailPanelRow\", undefined);\n    (0, _defineProperty2[\"default\"])(this, \"lastEditingRow\", undefined);\n    (0, _defineProperty2[\"default\"])(this, \"orderBy\", -1);\n    (0, _defineProperty2[\"default\"])(this, \"orderDirection\", 'desc');\n    (0, _defineProperty2[\"default\"])(this, \"pageSize\", 5);\n    (0, _defineProperty2[\"default\"])(this, \"paging\", true);\n    (0, _defineProperty2[\"default\"])(this, \"parentFunc\", null);\n    (0, _defineProperty2[\"default\"])(this, \"searchText\", '');\n    (0, _defineProperty2[\"default\"])(this, \"searchDebounceDelay\", 500);\n    (0, _defineProperty2[\"default\"])(this, \"selectedCount\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"treefiedDataLength\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"treeDataMaxLevel\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"groupedDataLength\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"defaultExpanded\", false);\n    (0, _defineProperty2[\"default\"])(this, \"bulkEditOpen\", false);\n    (0, _defineProperty2[\"default\"])(this, \"bulkEditChangedRows\", {});\n    (0, _defineProperty2[\"default\"])(this, \"data\", []);\n    (0, _defineProperty2[\"default\"])(this, \"columns\", []);\n    (0, _defineProperty2[\"default\"])(this, \"filteredData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"searchedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"groupedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"treefiedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"sortedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"pagedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"renderData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"filtered\", false);\n    (0, _defineProperty2[\"default\"])(this, \"searched\", false);\n    (0, _defineProperty2[\"default\"])(this, \"grouped\", false);\n    (0, _defineProperty2[\"default\"])(this, \"treefied\", false);\n    (0, _defineProperty2[\"default\"])(this, \"sorted\", false);\n    (0, _defineProperty2[\"default\"])(this, \"paged\", false);\n    (0, _defineProperty2[\"default\"])(this, \"rootGroupsIndex\", {});\n    (0, _defineProperty2[\"default\"])(this, \"changeGroupSelected\", function (checked, path) {\n      var currentGroup;\n      var currentGroupArray = _this.groupedData;\n      path.forEach(function (value) {\n        currentGroup = currentGroupArray.find(function (group) {\n          return group.value == value;\n        });\n        currentGroupArray = currentGroup.groups;\n      });\n\n      var setCheck = function setCheck(data) {\n        data.forEach(function (element) {\n          if (element.groups.length > 0) {\n            setCheck(element.groups);\n          } else {\n            element.data.forEach(function (d) {\n              if (d.tableData.checked != checked) {\n                d.tableData.checked = d.tableData.disabled ? false : checked;\n                _this.selectedCount = _this.selectedCount + (checked ? 1 : -1);\n              }\n            });\n          }\n        });\n      };\n\n      setCheck([currentGroup]);\n    });\n    (0, _defineProperty2[\"default\"])(this, \"startCellEditable\", function (rowData, columnDef) {\n      rowData.tableData.editCellList = [].concat((0, _toConsumableArray2[\"default\"])(rowData.tableData.editCellList || []), [columnDef]);\n    });\n    (0, _defineProperty2[\"default\"])(this, \"finishCellEditable\", function (rowData, columnDef) {\n      if (rowData.tableData.editCellList) {\n        var index = rowData.tableData.editCellList.findIndex(function (c) {\n          return c.tableData.id === columnDef.tableData.id;\n        });\n\n        if (index !== -1) {\n          rowData.tableData.editCellList.splice(index, 1);\n        }\n      }\n    });\n    (0, _defineProperty2[\"default\"])(this, \"clearBulkEditChangedRows\", function () {\n      _this.bulkEditChangedRows = {};\n    });\n    (0, _defineProperty2[\"default\"])(this, \"onBulkEditRowChanged\", function (oldData, newData) {\n      _this.bulkEditChangedRows[oldData.tableData.id] = {\n        oldData: oldData,\n        newData: newData\n      };\n    });\n    (0, _defineProperty2[\"default\"])(this, \"expandTreeForNodes\", function (data) {\n      data.forEach(function (row) {\n        var currentRow = row;\n\n        while (_this.parentFunc(currentRow, _this.data)) {\n          var parent = _this.parentFunc(currentRow, _this.data);\n\n          if (parent) {\n            parent.tableData.isTreeExpanded = true;\n          }\n\n          currentRow = parent;\n        }\n      });\n    });\n    (0, _defineProperty2[\"default\"])(this, \"findDataByPath\", function (renderData, path) {\n      if (_this.isDataType('tree')) {\n        var node = path.reduce(function (result, current) {\n          return result && result.tableData && result.tableData.childRows && result.tableData.childRows[current];\n        }, {\n          tableData: {\n            childRows: renderData\n          }\n        });\n        return node;\n      } else {\n        var data = {\n          groups: renderData\n        };\n\n        var _node = path.reduce(function (result, current) {\n          if (result.groups.length > 0) {\n            return result.groups[current];\n          } else if (result.data) {\n            return result.data[current];\n          } else {\n            return undefined;\n          }\n        }, data);\n\n        return _node;\n      }\n    });\n    (0, _defineProperty2[\"default\"])(this, \"getFieldValue\", function (rowData, columnDef) {\n      var lookup = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var value = typeof rowData[columnDef.field] !== 'undefined' ? rowData[columnDef.field] : (0, _2.byString)(rowData, columnDef.field);\n\n      if (columnDef.lookup && lookup) {\n        value = columnDef.lookup[value];\n      }\n\n      return value;\n    });\n    (0, _defineProperty2[\"default\"])(this, \"getRenderState\", function () {\n      if (_this.filtered === false) {\n        _this.filterData();\n      }\n\n      if (_this.searched === false) {\n        _this.searchData();\n      }\n\n      if (_this.grouped === false && _this.isDataType('group')) {\n        _this.groupData();\n      }\n\n      if (_this.treefied === false && _this.isDataType('tree')) {\n        _this.treefyData();\n      }\n\n      if (_this.sorted === false) {\n        _this.sortData();\n      }\n\n      if (_this.paged === false) {\n        _this.pageData();\n      }\n\n      return {\n        columns: _this.columns,\n        currentPage: _this.currentPage,\n        data: _this.sortedData,\n        lastEditingRow: _this.lastEditingRow,\n        orderBy: _this.orderBy,\n        orderDirection: _this.orderDirection,\n        originalData: _this.data,\n        pageSize: _this.pageSize,\n        renderData: _this.pagedData,\n        searchText: _this.searchText,\n        selectedCount: _this.selectedCount,\n        treefiedDataLength: _this.treefiedDataLength,\n        treeDataMaxLevel: _this.treeDataMaxLevel,\n        groupedDataLength: _this.groupedDataLength\n      };\n    });\n    (0, _defineProperty2[\"default\"])(this, \"filterData\", function () {\n      _this.searched = _this.grouped = _this.treefied = _this.sorted = _this.paged = false;\n      _this.filteredData = (0, _toConsumableArray2[\"default\"])(_this.data);\n\n      if (_this.applyFilters) {\n        _this.columns.filter(function (columnDef) {\n          return columnDef.tableData.filterValue;\n        }).forEach(function (columnDef) {\n          var lookup = columnDef.lookup,\n              type = columnDef.type,\n              tableData = columnDef.tableData;\n\n          if (columnDef.customFilterAndSearch) {\n            _this.filteredData = _this.filteredData.filter(function (row) {\n              return !!columnDef.customFilterAndSearch(tableData.filterValue, row, columnDef);\n            });\n          } else {\n            if (lookup) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef, false);\n\n                return !tableData.filterValue || tableData.filterValue.length === 0 || tableData.filterValue.indexOf(value !== undefined && value !== null && value.toString()) > -1;\n              });\n            } else if (type === 'numeric') {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                return value + '' === tableData.filterValue;\n              });\n            } else if (type === 'boolean' && tableData.filterValue) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                return value && tableData.filterValue === 'checked' || !value && tableData.filterValue === 'unchecked';\n              });\n            } else if (['date', 'datetime'].includes(type)) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                var currentDate = value ? new Date(value) : null;\n\n                if (currentDate && currentDate.toString() !== 'Invalid Date') {\n                  var selectedDate = tableData.filterValue;\n                  var currentDateToCompare = '';\n                  var selectedDateToCompare = '';\n\n                  if (type === 'date') {\n                    currentDateToCompare = (0, _format[\"default\"])(currentDate, 'MM/dd/yyyy');\n                    selectedDateToCompare = (0, _format[\"default\"])(selectedDate, 'MM/dd/yyyy');\n                  } else if (type === 'datetime') {\n                    currentDateToCompare = (0, _format[\"default\"])(currentDate, 'MM/dd/yyyy - HH:mm');\n                    selectedDateToCompare = (0, _format[\"default\"])(selectedDate, 'MM/dd/yyyy - HH:mm');\n                  }\n\n                  return currentDateToCompare === selectedDateToCompare;\n                }\n\n                return true;\n              });\n            } else if (type === 'time') {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                var currentHour = value || null;\n\n                if (currentHour) {\n                  var selectedHour = tableData.filterValue;\n                  var currentHourToCompare = (0, _format[\"default\"])(selectedHour, 'HH:mm');\n                  return currentHour === currentHourToCompare;\n                }\n\n                return true;\n              });\n            } else {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                return value && value.toString().toUpperCase().includes(tableData.filterValue.toUpperCase());\n              });\n            }\n          }\n        });\n      }\n\n      _this.filtered = true;\n    });\n    (0, _defineProperty2[\"default\"])(this, \"searchData\", function () {\n      _this.grouped = _this.treefied = _this.sorted = _this.paged = false;\n      _this.searchedData = (0, _toConsumableArray2[\"default\"])(_this.filteredData);\n\n      if (_this.searchText && _this.applySearch) {\n        var trimmedSearchText = _this.searchText.trim();\n\n        _this.searchedData = _this.searchedData.filter(function (row) {\n          return _this.columns.filter(function (columnDef) {\n            return columnDef.searchable === undefined ? !columnDef.hidden : columnDef.searchable;\n          }).some(function (columnDef) {\n            if (columnDef.customFilterAndSearch) {\n              return !!columnDef.customFilterAndSearch(trimmedSearchText, row, columnDef);\n            } else if (columnDef.field) {\n              var value = _this.getFieldValue(row, columnDef);\n\n              if (value) {\n                return value.toString().toUpperCase().includes(trimmedSearchText.toUpperCase());\n              }\n            }\n          });\n        });\n      }\n\n      _this.searched = true;\n    });\n  }\n\n  (0, _createClass2[\"default\"])(DataManager, [{\n    key: \"setData\",\n    value: function setData(data) {\n      var _this2 = this;\n\n      this.selectedCount = 0;\n      var prevDataObject = {};\n\n      if (this.data.length !== 0 && this.data[0].id !== undefined) {\n        prevDataObject = this.data.reduce(function (obj, row) {\n          obj[row.tableData.id] = row.tableData;\n          return obj;\n        }, {});\n      }\n\n      if (process.env.NODE_ENV === 'development' && !this.checkForId) {\n        this.checkForId = true;\n\n        if (data.some(function (d) {\n          return d.id === undefined;\n        })) {\n          console.warn('The table requires all rows to have an unique id property. A row was provided without id in the rows prop. To prevent the loss of state between renders, please provide an unique id for each row.');\n        }\n      }\n\n      this.data = data.map(function (row, index) {\n        var prevTableData = prevDataObject[row.id] || {};\n\n        var tableData = _objectSpread(_objectSpread({\n          id: row.id || index,\n          // `uuid` acts as our 'key' and is generated when new data\n          // is passed into material-table externally.\n          uuid: row.uuid || _uuid[\"default\"].v4()\n        }, prevTableData), row.tableData);\n\n        if (tableData.checked) {\n          _this2.selectedCount++;\n        }\n\n        return _objectSpread(_objectSpread({}, row), {}, {\n          tableData: tableData\n        });\n      });\n      this.filtered = false;\n    }\n  }, {\n    key: \"setColumns\",\n    value: function setColumns(columns) {\n      var prevColumns = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var usedWidth = ['0px'];\n      this.columns = columns.map(function (columnDef, index) {\n        var width = typeof columnDef.width === 'number' ? columnDef.width + 'px' : columnDef.width;\n\n        if (width && columnDef.tableData && columnDef.tableData.width !== undefined) {\n          usedWidth.push(width);\n        }\n\n        var prevColumn = prevColumns.find(function (_ref) {\n          var id = _ref.id;\n          return id === index;\n        });\n\n        var tableData = _objectSpread(_objectSpread(_objectSpread({\n          columnOrder: index,\n          filterValue: columnDef.defaultFilter,\n          groupOrder: columnDef.defaultGroupOrder,\n          groupSort: columnDef.defaultGroupSort || 'asc',\n          width: width,\n          initialWidth: width,\n          additionalWidth: 0\n        }, prevColumn ? prevColumn.tableData : {}), columnDef.tableData), {}, {\n          id: index\n        });\n\n        columnDef.tableData = tableData;\n        return columnDef;\n      });\n      var undefinedWidthColumns = this.columns.filter(function (c) {\n        if (c.hidden) {\n          // Hidden column\n          return false;\n        }\n\n        if (c.columnDef && c.columnDef.tableData && c.columnDef.tableData.width) {\n          // tableData.width already calculated\n          return false;\n        } // Calculate width if no value provided\n\n\n        return c.width === undefined;\n      });\n      usedWidth = '(' + usedWidth.join(' + ') + ')';\n      undefinedWidthColumns.forEach(function (columnDef) {\n        columnDef.tableData.width = columnDef.tableData.initialWidth = \"calc((100% - \".concat(usedWidth, \") / \").concat(undefinedWidthColumns.length, \")\");\n      });\n    }\n  }, {\n    key: \"setDefaultExpanded\",\n    value: function setDefaultExpanded(expanded) {\n      this.defaultExpanded = expanded;\n    }\n  }, {\n    key: \"changeApplySearch\",\n    value: function changeApplySearch(applySearch) {\n      this.applySearch = applySearch;\n      this.searched = false;\n    }\n  }, {\n    key: \"changeApplyFilters\",\n    value: function changeApplyFilters(applyFilters) {\n      this.applyFilters = applyFilters;\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeApplySort\",\n    value: function changeApplySort(applySort) {\n      this.applySort = applySort;\n      this.sorted = false;\n    }\n  }, {\n    key: \"changePaging\",\n    value: function changePaging(paging) {\n      this.paging = paging;\n      this.paged = false;\n    }\n  }, {\n    key: \"changeCurrentPage\",\n    value: function changeCurrentPage(currentPage) {\n      this.currentPage = currentPage;\n      this.paged = false;\n    }\n  }, {\n    key: \"changePageSize\",\n    value: function changePageSize(pageSize) {\n      this.pageSize = pageSize;\n      this.paged = false;\n    }\n  }, {\n    key: \"changeParentFunc\",\n    value: function changeParentFunc(parentFunc) {\n      this.parentFunc = parentFunc;\n    }\n  }, {\n    key: \"changeFilterValue\",\n    value: function changeFilterValue(columnId, value) {\n      this.columns[columnId].tableData.filterValue = value;\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeRowSelected\",\n    value: function changeRowSelected(checked, path) {\n      var _this3 = this;\n\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.tableData.checked = checked;\n      this.selectedCount = this.selectedCount + (checked ? 1 : -1);\n\n      var checkChildRows = function checkChildRows(rowData) {\n        if (rowData.tableData.childRows) {\n          rowData.tableData.childRows.forEach(function (childRow) {\n            if (childRow.tableData.checked !== checked) {\n              childRow.tableData.checked = checked;\n              _this3.selectedCount = _this3.selectedCount + (checked ? 1 : -1);\n            }\n\n            checkChildRows(childRow);\n          });\n        }\n      };\n\n      checkChildRows(rowData);\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeDetailPanelVisibility\",\n    value: function changeDetailPanelVisibility(path, render) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n\n      if ((rowData.tableData.showDetailPanel || '').toString() === render.toString()) {\n        rowData.tableData.showDetailPanel = undefined;\n      } else {\n        rowData.tableData.showDetailPanel = render;\n      }\n\n      if (this.detailPanelType === 'single' && this.lastDetailPanelRow && this.lastDetailPanelRow != rowData) {\n        this.lastDetailPanelRow.tableData.showDetailPanel = undefined;\n      }\n\n      this.lastDetailPanelRow = rowData;\n    }\n  }, {\n    key: \"changeGroupExpand\",\n    value: function changeGroupExpand(path) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.isExpanded = !rowData.isExpanded;\n    }\n  }, {\n    key: \"changeSearchText\",\n    value: function changeSearchText(searchText) {\n      this.searchText = searchText;\n      this.searched = false;\n      this.currentPage = 0;\n    }\n  }, {\n    key: \"changeSearchDebounce\",\n    value: function changeSearchDebounce(searchDebounceDelay) {\n      this.searchDebounceDelay = searchDebounceDelay;\n    }\n  }, {\n    key: \"changeRowEditing\",\n    value: function changeRowEditing(rowData, mode) {\n      if (rowData) {\n        rowData.tableData.editing = mode;\n\n        if (this.lastEditingRow && this.lastEditingRow != rowData) {\n          this.lastEditingRow.tableData.editing = undefined;\n        }\n\n        if (mode) {\n          this.lastEditingRow = rowData;\n        } else {\n          this.lastEditingRow = undefined;\n        }\n      } else if (this.lastEditingRow) {\n        this.lastEditingRow.tableData.editing = undefined;\n        this.lastEditingRow = undefined;\n      }\n    }\n  }, {\n    key: \"changeBulkEditOpen\",\n    value: function changeBulkEditOpen(bulkEditOpen) {\n      this.bulkEditOpen = bulkEditOpen;\n    }\n  }, {\n    key: \"changeAllSelected\",\n    value: function changeAllSelected(checked, selectionProps) {\n      var selectedCount = 0;\n\n      var isChecked = function isChecked(row) {\n        var selectionResult = selectionProps ? selectionProps(row) : {\n          disabled: false\n        };\n        return row.tableData.disabled || selectionResult.disabled ? false : checked;\n      };\n\n      if (this.isDataType('group')) {\n        var setCheck = function setCheck(data) {\n          data.forEach(function (element) {\n            if (element.groups.length > 0) {\n              setCheck(element.groups);\n            } else {\n              element.data.forEach(function (d) {\n                d.tableData.checked = isChecked(d);\n                selectedCount++;\n              });\n            }\n          });\n        };\n\n        setCheck(this.groupedData);\n      } else {\n        this.searchedData.forEach(function (row) {\n          row.tableData.checked = isChecked(row);\n        });\n        selectedCount = this.searchedData.length;\n      }\n\n      this.selectedCount = checked ? selectedCount : 0;\n    }\n  }, {\n    key: \"changeOrder\",\n    value: function changeOrder(orderBy, orderDirection) {\n      this.orderBy = orderBy;\n      this.orderDirection = orderDirection;\n      this.currentPage = 0;\n      this.sorted = false;\n    }\n  }, {\n    key: \"changeGroupOrder\",\n    value: function changeGroupOrder(columnId) {\n      var column = this.columns.find(function (c) {\n        return c.tableData.id === columnId;\n      });\n\n      if (column.tableData.groupSort === 'asc') {\n        column.tableData.groupSort = 'desc';\n      } else {\n        column.tableData.groupSort = 'asc';\n      }\n\n      this.sorted = false;\n    }\n  }, {\n    key: \"changeColumnHidden\",\n    value: function changeColumnHidden(column, hidden) {\n      column.hidden = hidden; // https://github.com/mbrn/material-table/pull/2655\n      // https://github.com/material-table-core/core/issues/20#issuecomment-752265651\n      // Fix #20\n\n      this.setColumns(this.columns);\n    }\n  }, {\n    key: \"changeTreeExpand\",\n    value: function changeTreeExpand(path) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.tableData.isTreeExpanded = !rowData.tableData.isTreeExpanded;\n    }\n  }, {\n    key: \"changeDetailPanelType\",\n    value: function changeDetailPanelType(type) {\n      this.detailPanelType = type;\n    }\n  }, {\n    key: \"changeByDrag\",\n    value: function changeByDrag(result) {\n      var start = 0;\n      var groups = this.columns.filter(function (col) {\n        return col.tableData.groupOrder > -1;\n      }).sort(function (col1, col2) {\n        return col1.tableData.groupOrder - col2.tableData.groupOrder;\n      });\n\n      if (result.destination.droppableId === 'groups' && result.source.droppableId === 'groups') {\n        start = Math.min(result.destination.index, result.source.index);\n        var end = Math.max(result.destination.index, result.source.index);\n        groups = groups.slice(start, end + 1);\n\n        if (result.destination.index < result.source.index) {\n          // Take last and add as first\n          var last = groups.pop();\n          groups.unshift(last);\n        } else {\n          // Take first and add as last\n          var _last = groups.shift();\n\n          groups.push(_last);\n        }\n      } else if (result.destination.droppableId === 'groups' && result.source.droppableId === 'headers') {\n        var newGroup = this.columns.find(function (c) {\n          return c.tableData.id == result.draggableId;\n        });\n\n        if (newGroup.grouping === false || !newGroup.field) {\n          return;\n        }\n\n        groups.splice(result.destination.index, 0, newGroup);\n      } else if (result.destination.droppableId === 'headers' && result.source.droppableId === 'groups') {\n        var removeGroup = this.columns.find(function (c) {\n          return c.tableData.id == result.draggableId;\n        });\n        removeGroup.tableData.groupOrder = undefined;\n        groups.splice(result.source.index, 1);\n      } else if (result.destination.droppableId === 'headers' && result.source.droppableId === 'headers') {\n        start = Math.min(result.destination.index, result.source.index);\n\n        var _end = Math.max(result.destination.index, result.source.index); // get the effective start and end considering hidden columns\n\n\n        var sorted = this.columns.sort(function (a, b) {\n          return a.tableData.columnOrder - b.tableData.columnOrder;\n        }).filter(function (column) {\n          return column.tableData.groupOrder === undefined;\n        });\n        var numHiddenBeforeStart = 0;\n        var numVisibleBeforeStart = 0;\n\n        for (var i = 0; i < sorted.length && numVisibleBeforeStart <= start; i++) {\n          if (sorted[i].hidden) {\n            numHiddenBeforeStart++;\n          } else {\n            numVisibleBeforeStart++;\n          }\n        }\n\n        var effectiveStart = start + numHiddenBeforeStart;\n        var effectiveEnd = effectiveStart;\n\n        for (var numVisibleInRange = 0; numVisibleInRange < _end - start && effectiveEnd < sorted.length; effectiveEnd++) {\n          if (!sorted[effectiveEnd].hidden) {\n            numVisibleInRange++;\n          }\n        }\n\n        var colsToMov = sorted.slice(effectiveStart, effectiveEnd + 1);\n\n        if (result.destination.index < result.source.index) {\n          // Take last and add as first\n          var _last2 = colsToMov.pop();\n\n          colsToMov.unshift(_last2);\n        } else {\n          // Take first and add as last\n          var _last3 = colsToMov.shift();\n\n          colsToMov.push(_last3);\n        }\n\n        for (var _i = 0; _i < colsToMov.length; _i++) {\n          colsToMov[_i].tableData.columnOrder = effectiveStart + _i;\n        }\n\n        return;\n      } else {\n        return;\n      }\n\n      for (var _i2 = 0; _i2 < groups.length; _i2++) {\n        groups[_i2].tableData.groupOrder = start + _i2;\n      }\n\n      this.sorted = this.grouped = false;\n    }\n  }, {\n    key: \"onColumnResized\",\n    value: function onColumnResized(id, additionalWidth) {\n      var column = this.columns.find(function (c) {\n        return c.tableData.id === id;\n      });\n\n      if (!column) {\n        return;\n      }\n\n      var nextColumn = this.columns.find(function (c) {\n        return c.tableData.id === id + 1;\n      });\n\n      if (!nextColumn) {\n        return;\n      }\n\n      column.tableData.additionalWidth = additionalWidth;\n      column.tableData.width = \"calc(\".concat(column.tableData.initialWidth, \" + \").concat(column.tableData.additionalWidth, \"px)\");\n    }\n  }, {\n    key: \"findGroupByGroupPath\",\n    value: function findGroupByGroupPath(renderData, path) {\n      var data = {\n        groups: renderData,\n        groupsIndex: this.rootGroupsIndex\n      };\n      var node = path.reduce(function (result, current) {\n        if (!result) {\n          return undefined;\n        }\n\n        if (result.groupsIndex[current] !== undefined) {\n          return result.groups[result.groupsIndex[current]];\n        }\n\n        return undefined; // const group = result.groups.find(a => a.value === current);\n        // return group;\n      }, data);\n      return node;\n    }\n  }, {\n    key: \"isDataType\",\n    value: function isDataType(type) {\n      var dataType = 'normal';\n\n      if (this.parentFunc) {\n        dataType = 'tree';\n      } else if (this.columns.find(function (a) {\n        return a.tableData.groupOrder > -1;\n      })) {\n        dataType = 'group';\n      }\n\n      return type === dataType;\n    }\n  }, {\n    key: \"sort\",\n    value: function sort(a, b, type) {\n      if (type === 'numeric') {\n        return a - b;\n      } else {\n        if (a !== b) {\n          // to find nulls\n          if (!a) return -1;\n          if (!b) return 1;\n        }\n\n        return a < b ? -1 : a > b ? 1 : 0;\n      }\n    }\n  }, {\n    key: \"sortList\",\n    value: function sortList(list) {\n      var _this4 = this;\n\n      var columnDef = this.columns.find(function (_) {\n        return _.tableData.id === _this4.orderBy;\n      });\n\n      if (!columnDef) {\n        columnDef = this.columns[0];\n      }\n\n      var result = list;\n\n      if (columnDef.customSort) {\n        if (this.orderDirection === 'desc') {\n          result = list.sort(function (a, b) {\n            return columnDef.customSort(b, a, 'row', 'desc');\n          });\n        } else {\n          result = list.sort(function (a, b) {\n            return columnDef.customSort(a, b, 'row');\n          });\n        }\n      } else {\n        result = list.sort(this.orderDirection === 'desc' ? function (a, b) {\n          return _this4.sort(_this4.getFieldValue(b, columnDef), _this4.getFieldValue(a, columnDef), columnDef.type);\n        } : function (a, b) {\n          return _this4.sort(_this4.getFieldValue(a, columnDef), _this4.getFieldValue(b, columnDef), columnDef.type);\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"groupData\",\n    value: function groupData() {\n      var _this5 = this;\n\n      this.sorted = this.paged = false;\n      this.groupedDataLength = 0;\n      var tmpData = (0, _toConsumableArray2[\"default\"])(this.searchedData);\n      var groups = this.columns.filter(function (col) {\n        return col.tableData.groupOrder > -1;\n      }).sort(function (col1, col2) {\n        return col1.tableData.groupOrder - col2.tableData.groupOrder;\n      });\n      var subData = tmpData.reduce(function (result, currentRow) {\n        var object = result;\n        object = groups.reduce(function (o, colDef) {\n          var value = currentRow[colDef.field] || (0, _2.byString)(currentRow, colDef.field);\n          var group;\n\n          if (o.groupsIndex[value] !== undefined) {\n            group = o.groups[o.groupsIndex[value]];\n          }\n\n          if (!group) {\n            var path = [].concat((0, _toConsumableArray2[\"default\"])(o.path || []), [value]);\n            var oldGroup = _this5.findGroupByGroupPath(_this5.groupedData, path) || {\n              isExpanded: typeof _this5.defaultExpanded === 'boolean' ? _this5.defaultExpanded : false\n            };\n            group = {\n              value: value,\n              groups: [],\n              groupsIndex: {},\n              data: [],\n              isExpanded: oldGroup.isExpanded,\n              path: path\n            };\n            o.groups.push(group);\n            o.groupsIndex[value] = o.groups.length - 1;\n          }\n\n          return group;\n        }, object);\n        object.data.push(currentRow);\n        _this5.groupedDataLength++;\n        return result;\n      }, {\n        groups: [],\n        groupsIndex: {}\n      });\n      this.groupedData = subData.groups;\n      this.grouped = true;\n      this.rootGroupsIndex = subData.groupsIndex;\n    }\n  }, {\n    key: \"treefyData\",\n    value: function treefyData() {\n      var _this6 = this;\n\n      this.sorted = this.paged = false;\n      this.data.forEach(function (a) {\n        return a.tableData.childRows = null;\n      });\n      this.treefiedData = [];\n      this.treefiedDataLength = 0;\n      this.treeDataMaxLevel = 0; // if filter or search is enabled, collapse the tree\n\n      if (this.searchText || this.columns.some(function (columnDef) {\n        return columnDef.tableData.filterValue;\n      })) {\n        this.data.forEach(function (row) {\n          row.tableData.isTreeExpanded = false;\n        }); // expand the tree for all nodes present after filtering and searching\n\n        this.expandTreeForNodes(this.searchedData);\n      }\n\n      var addRow = function addRow(rowData) {\n        rowData.tableData.markedForTreeRemove = false;\n\n        var parent = _this6.parentFunc(rowData, _this6.data);\n\n        if (parent) {\n          parent.tableData.childRows = parent.tableData.childRows || [];\n\n          if (!parent.tableData.childRows.includes(rowData)) {\n            parent.tableData.childRows.push(rowData);\n            _this6.treefiedDataLength++;\n          }\n\n          addRow(parent);\n          rowData.tableData.path = [].concat((0, _toConsumableArray2[\"default\"])(parent.tableData.path), [parent.tableData.childRows.length - 1]);\n          _this6.treeDataMaxLevel = Math.max(_this6.treeDataMaxLevel, rowData.tableData.path.length);\n        } else {\n          if (!_this6.treefiedData.includes(rowData)) {\n            _this6.treefiedData.push(rowData);\n\n            _this6.treefiedDataLength++;\n            rowData.tableData.path = [_this6.treefiedData.length - 1];\n          }\n        }\n      }; // Add all rows initially\n\n\n      this.data.forEach(function (rowData) {\n        addRow(rowData);\n      });\n\n      var markForTreeRemove = function markForTreeRemove(rowData) {\n        var pointer = _this6.treefiedData;\n        rowData.tableData.path.forEach(function (pathPart) {\n          if (pointer.tableData && pointer.tableData.childRows) {\n            pointer = pointer.tableData.childRows;\n          }\n\n          pointer = pointer[pathPart];\n        });\n        pointer.tableData.markedForTreeRemove = true;\n      };\n\n      var traverseChildrenAndUnmark = function traverseChildrenAndUnmark(rowData) {\n        if (rowData.tableData.childRows) {\n          rowData.tableData.childRows.forEach(function (row) {\n            traverseChildrenAndUnmark(row);\n          });\n        }\n\n        rowData.tableData.markedForTreeRemove = false;\n      }; // for all data rows, restore initial expand if no search term is available and remove items that shouldn't be there\n\n\n      this.data.forEach(function (rowData) {\n        if (!_this6.searchText && !_this6.columns.some(function (columnDef) {\n          return columnDef.tableData.filterValue;\n        })) {\n          if (rowData.tableData.isTreeExpanded === undefined) {\n            var isExpanded = typeof _this6.defaultExpanded === 'boolean' ? _this6.defaultExpanded : _this6.defaultExpanded(rowData);\n            rowData.tableData.isTreeExpanded = isExpanded;\n          }\n        }\n\n        var hasSearchMatchedChildren = rowData.tableData.isTreeExpanded;\n\n        if (!hasSearchMatchedChildren && _this6.searchedData.indexOf(rowData) < 0) {\n          markForTreeRemove(rowData);\n        }\n      }); // preserve all children of nodes that are matched by search or filters\n\n      this.data.forEach(function (rowData) {\n        if (_this6.searchedData.indexOf(rowData) > -1) {\n          traverseChildrenAndUnmark(rowData);\n        }\n      });\n\n      var traverseTreeAndDeleteMarked = function traverseTreeAndDeleteMarked(rowDataArray) {\n        for (var i = rowDataArray.length - 1; i >= 0; i--) {\n          var item = rowDataArray[i];\n\n          if (item.tableData.childRows) {\n            traverseTreeAndDeleteMarked(item.tableData.childRows);\n          }\n\n          if (item.tableData.markedForTreeRemove) rowDataArray.splice(i, 1);\n        }\n      };\n\n      traverseTreeAndDeleteMarked(this.treefiedData);\n      this.treefied = true;\n    }\n  }, {\n    key: \"sortData\",\n    value: function sortData() {\n      var _this7 = this;\n\n      this.paged = false;\n\n      if (this.isDataType('group')) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.groupedData);\n        var groups = this.columns.filter(function (col) {\n          return col.tableData.groupOrder > -1;\n        }).sort(function (col1, col2) {\n          return col1.tableData.groupOrder - col2.tableData.groupOrder;\n        });\n\n        var sortGroups = function sortGroups(list, columnDef) {\n          if (columnDef.customSort) {\n            return list.sort(columnDef.tableData.groupSort === 'desc' ? function (a, b) {\n              return columnDef.customSort(b.value, a.value, 'group');\n            } : function (a, b) {\n              return columnDef.customSort(a.value, b.value, 'group');\n            });\n          } else {\n            return list.sort(columnDef.tableData.groupSort === 'desc' ? function (a, b) {\n              return _this7.sort(b.value, a.value, columnDef.type);\n            } : function (a, b) {\n              return _this7.sort(a.value, b.value, columnDef.type);\n            });\n          }\n        };\n\n        this.sortedData = sortGroups(this.sortedData, groups[0]); // If you have nested grouped rows and wanted to select one of those row\n        // there was an issue.\n        // -https://github.com/material-table-core/core/pull/74\n        // -https://github.com/mbrn/material-table/issues/2258\n        // -https://github.com/mbrn/material-table/issues/2249\n        // getGroupsIndex resolves this nested grouped rows selection issue.\n\n        var getGroupsIndex = function getGroupsIndex(groups) {\n          return groups.reduce(function (result, group) {\n            result[group.value] = groups.findIndex(function (g) {\n              return g.value === group.value;\n            });\n            return result;\n          }, {});\n        };\n\n        var sortGroupData = function sortGroupData(list, level) {\n          list.forEach(function (element) {\n            if (element.groups.length > 0) {\n              var column = groups[level];\n              element.groups = sortGroups(element.groups, column); // For grouped rows that are nested\n\n              element.groupsIndex = getGroupsIndex(element.groups);\n              sortGroupData(element.groups, level + 1);\n            } else {\n              if (_this7.orderBy >= 0 && _this7.orderDirection) {\n                element.data = _this7.sortList(element.data);\n              } else if (_this7.orderDirection === '') {\n                element.data = element.data.sort(function (a, b) {\n                  return _this7.data.findIndex(function (val) {\n                    return val.tableData.id === a.tableData.id;\n                  }) - _this7.data.findIndex(function (val) {\n                    return val.tableData.id === b.tableData.id;\n                  });\n                });\n              }\n            }\n          });\n        };\n\n        sortGroupData(this.sortedData, 1);\n      } else if (this.isDataType('tree')) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.treefiedData);\n\n        if (this.orderBy != -1) {\n          this.sortedData = this.sortList(this.sortedData);\n\n          var sortTree = function sortTree(list) {\n            list.forEach(function (item) {\n              if (item.tableData.childRows) {\n                item.tableData.childRows = _this7.sortList(item.tableData.childRows);\n                sortTree(item.tableData.childRows);\n              }\n            });\n          };\n\n          sortTree(this.sortedData);\n        }\n      } else if (this.isDataType('normal')) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.searchedData);\n\n        if (this.orderBy != -1 && this.applySort) {\n          this.sortedData = this.sortList(this.sortedData);\n        }\n      }\n\n      this.sorted = true;\n    }\n  }, {\n    key: \"pageData\",\n    value: function pageData() {\n      this.pagedData = (0, _toConsumableArray2[\"default\"])(this.sortedData);\n\n      if (this.paging) {\n        var startIndex = this.currentPage * this.pageSize;\n        var endIndex = startIndex + this.pageSize;\n        this.pagedData = this.pagedData.slice(startIndex, endIndex);\n      }\n\n      this.paged = true;\n    }\n  }]);\n  return DataManager;\n}();\n\nexports[\"default\"] = DataManager;","map":{"version":3,"sources":["C:/Users/ADMIN DEP IT/Documents/NetBeansProjects/talleresfront/node_modules/@material-table/core/dist/utils/data-manager.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_toConsumableArray2","_classCallCheck2","_createClass2","_defineProperty2","_format","_uuid","_2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","DataManager","_this","undefined","checked","path","currentGroup","currentGroupArray","groupedData","find","group","groups","setCheck","data","element","d","tableData","disabled","selectedCount","rowData","columnDef","editCellList","concat","index","findIndex","c","id","splice","bulkEditChangedRows","oldData","newData","row","currentRow","parentFunc","parent","isTreeExpanded","renderData","isDataType","node","reduce","result","current","childRows","_node","lookup","field","byString","filtered","filterData","searched","searchData","grouped","groupData","treefied","treefyData","sorted","sortData","paged","pageData","columns","currentPage","sortedData","lastEditingRow","orderBy","orderDirection","originalData","pageSize","pagedData","searchText","treefiedDataLength","treeDataMaxLevel","groupedDataLength","filteredData","applyFilters","filterValue","type","customFilterAndSearch","getFieldValue","indexOf","toString","includes","currentDate","Date","selectedDate","currentDateToCompare","selectedDateToCompare","currentHour","selectedHour","currentHourToCompare","toUpperCase","searchedData","applySearch","trimmedSearchText","trim","searchable","hidden","some","setData","_this2","prevDataObject","obj","process","env","NODE_ENV","checkForId","console","warn","map","prevTableData","uuid","v4","setColumns","prevColumns","usedWidth","width","prevColumn","_ref","columnOrder","defaultFilter","groupOrder","defaultGroupOrder","groupSort","defaultGroupSort","initialWidth","additionalWidth","undefinedWidthColumns","join","setDefaultExpanded","expanded","defaultExpanded","changeApplySearch","changeApplyFilters","changeApplySort","applySort","changePaging","paging","changeCurrentPage","changePageSize","changeParentFunc","changeFilterValue","columnId","changeRowSelected","_this3","findDataByPath","checkChildRows","childRow","changeDetailPanelVisibility","render","showDetailPanel","detailPanelType","lastDetailPanelRow","changeGroupExpand","isExpanded","changeSearchText","changeSearchDebounce","searchDebounceDelay","changeRowEditing","mode","editing","changeBulkEditOpen","bulkEditOpen","changeAllSelected","selectionProps","isChecked","selectionResult","changeOrder","changeGroupOrder","column","changeColumnHidden","changeTreeExpand","changeDetailPanelType","changeByDrag","start","col","sort","col1","col2","destination","droppableId","Math","min","end","max","slice","last","pop","unshift","_last","shift","newGroup","draggableId","grouping","removeGroup","_end","a","b","numHiddenBeforeStart","numVisibleBeforeStart","effectiveStart","effectiveEnd","numVisibleInRange","colsToMov","_last2","_last3","_i","_i2","onColumnResized","nextColumn","findGroupByGroupPath","groupsIndex","rootGroupsIndex","dataType","sortList","list","_this4","_","customSort","_this5","tmpData","subData","o","colDef","oldGroup","_this6","treefiedData","expandTreeForNodes","addRow","markedForTreeRemove","markForTreeRemove","pointer","pathPart","traverseChildrenAndUnmark","hasSearchMatchedChildren","traverseTreeAndDeleteMarked","rowDataArray","item","_this7","sortGroups","getGroupsIndex","g","sortGroupData","level","val","sortTree","startIndex","endIndex"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _format = _interopRequireDefault(require(\"date-fns/format\"));\n\nvar _uuid = _interopRequireDefault(require(\"uuid\"));\n\nvar _2 = require(\"./\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar DataManager = /*#__PURE__*/function () {\n  function DataManager() {\n    var _this = this;\n\n    (0, _classCallCheck2[\"default\"])(this, DataManager);\n    (0, _defineProperty2[\"default\"])(this, \"checkForId\", false);\n    (0, _defineProperty2[\"default\"])(this, \"applyFilters\", false);\n    (0, _defineProperty2[\"default\"])(this, \"applySearch\", false);\n    (0, _defineProperty2[\"default\"])(this, \"applySort\", false);\n    (0, _defineProperty2[\"default\"])(this, \"currentPage\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"detailPanelType\", 'multiple');\n    (0, _defineProperty2[\"default\"])(this, \"lastDetailPanelRow\", undefined);\n    (0, _defineProperty2[\"default\"])(this, \"lastEditingRow\", undefined);\n    (0, _defineProperty2[\"default\"])(this, \"orderBy\", -1);\n    (0, _defineProperty2[\"default\"])(this, \"orderDirection\", 'desc');\n    (0, _defineProperty2[\"default\"])(this, \"pageSize\", 5);\n    (0, _defineProperty2[\"default\"])(this, \"paging\", true);\n    (0, _defineProperty2[\"default\"])(this, \"parentFunc\", null);\n    (0, _defineProperty2[\"default\"])(this, \"searchText\", '');\n    (0, _defineProperty2[\"default\"])(this, \"searchDebounceDelay\", 500);\n    (0, _defineProperty2[\"default\"])(this, \"selectedCount\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"treefiedDataLength\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"treeDataMaxLevel\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"groupedDataLength\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"defaultExpanded\", false);\n    (0, _defineProperty2[\"default\"])(this, \"bulkEditOpen\", false);\n    (0, _defineProperty2[\"default\"])(this, \"bulkEditChangedRows\", {});\n    (0, _defineProperty2[\"default\"])(this, \"data\", []);\n    (0, _defineProperty2[\"default\"])(this, \"columns\", []);\n    (0, _defineProperty2[\"default\"])(this, \"filteredData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"searchedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"groupedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"treefiedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"sortedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"pagedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"renderData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"filtered\", false);\n    (0, _defineProperty2[\"default\"])(this, \"searched\", false);\n    (0, _defineProperty2[\"default\"])(this, \"grouped\", false);\n    (0, _defineProperty2[\"default\"])(this, \"treefied\", false);\n    (0, _defineProperty2[\"default\"])(this, \"sorted\", false);\n    (0, _defineProperty2[\"default\"])(this, \"paged\", false);\n    (0, _defineProperty2[\"default\"])(this, \"rootGroupsIndex\", {});\n    (0, _defineProperty2[\"default\"])(this, \"changeGroupSelected\", function (checked, path) {\n      var currentGroup;\n      var currentGroupArray = _this.groupedData;\n      path.forEach(function (value) {\n        currentGroup = currentGroupArray.find(function (group) {\n          return group.value == value;\n        });\n        currentGroupArray = currentGroup.groups;\n      });\n\n      var setCheck = function setCheck(data) {\n        data.forEach(function (element) {\n          if (element.groups.length > 0) {\n            setCheck(element.groups);\n          } else {\n            element.data.forEach(function (d) {\n              if (d.tableData.checked != checked) {\n                d.tableData.checked = d.tableData.disabled ? false : checked;\n                _this.selectedCount = _this.selectedCount + (checked ? 1 : -1);\n              }\n            });\n          }\n        });\n      };\n\n      setCheck([currentGroup]);\n    });\n    (0, _defineProperty2[\"default\"])(this, \"startCellEditable\", function (rowData, columnDef) {\n      rowData.tableData.editCellList = [].concat((0, _toConsumableArray2[\"default\"])(rowData.tableData.editCellList || []), [columnDef]);\n    });\n    (0, _defineProperty2[\"default\"])(this, \"finishCellEditable\", function (rowData, columnDef) {\n      if (rowData.tableData.editCellList) {\n        var index = rowData.tableData.editCellList.findIndex(function (c) {\n          return c.tableData.id === columnDef.tableData.id;\n        });\n\n        if (index !== -1) {\n          rowData.tableData.editCellList.splice(index, 1);\n        }\n      }\n    });\n    (0, _defineProperty2[\"default\"])(this, \"clearBulkEditChangedRows\", function () {\n      _this.bulkEditChangedRows = {};\n    });\n    (0, _defineProperty2[\"default\"])(this, \"onBulkEditRowChanged\", function (oldData, newData) {\n      _this.bulkEditChangedRows[oldData.tableData.id] = {\n        oldData: oldData,\n        newData: newData\n      };\n    });\n    (0, _defineProperty2[\"default\"])(this, \"expandTreeForNodes\", function (data) {\n      data.forEach(function (row) {\n        var currentRow = row;\n\n        while (_this.parentFunc(currentRow, _this.data)) {\n          var parent = _this.parentFunc(currentRow, _this.data);\n\n          if (parent) {\n            parent.tableData.isTreeExpanded = true;\n          }\n\n          currentRow = parent;\n        }\n      });\n    });\n    (0, _defineProperty2[\"default\"])(this, \"findDataByPath\", function (renderData, path) {\n      if (_this.isDataType('tree')) {\n        var node = path.reduce(function (result, current) {\n          return result && result.tableData && result.tableData.childRows && result.tableData.childRows[current];\n        }, {\n          tableData: {\n            childRows: renderData\n          }\n        });\n        return node;\n      } else {\n        var data = {\n          groups: renderData\n        };\n\n        var _node = path.reduce(function (result, current) {\n          if (result.groups.length > 0) {\n            return result.groups[current];\n          } else if (result.data) {\n            return result.data[current];\n          } else {\n            return undefined;\n          }\n        }, data);\n\n        return _node;\n      }\n    });\n    (0, _defineProperty2[\"default\"])(this, \"getFieldValue\", function (rowData, columnDef) {\n      var lookup = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var value = typeof rowData[columnDef.field] !== 'undefined' ? rowData[columnDef.field] : (0, _2.byString)(rowData, columnDef.field);\n\n      if (columnDef.lookup && lookup) {\n        value = columnDef.lookup[value];\n      }\n\n      return value;\n    });\n    (0, _defineProperty2[\"default\"])(this, \"getRenderState\", function () {\n      if (_this.filtered === false) {\n        _this.filterData();\n      }\n\n      if (_this.searched === false) {\n        _this.searchData();\n      }\n\n      if (_this.grouped === false && _this.isDataType('group')) {\n        _this.groupData();\n      }\n\n      if (_this.treefied === false && _this.isDataType('tree')) {\n        _this.treefyData();\n      }\n\n      if (_this.sorted === false) {\n        _this.sortData();\n      }\n\n      if (_this.paged === false) {\n        _this.pageData();\n      }\n\n      return {\n        columns: _this.columns,\n        currentPage: _this.currentPage,\n        data: _this.sortedData,\n        lastEditingRow: _this.lastEditingRow,\n        orderBy: _this.orderBy,\n        orderDirection: _this.orderDirection,\n        originalData: _this.data,\n        pageSize: _this.pageSize,\n        renderData: _this.pagedData,\n        searchText: _this.searchText,\n        selectedCount: _this.selectedCount,\n        treefiedDataLength: _this.treefiedDataLength,\n        treeDataMaxLevel: _this.treeDataMaxLevel,\n        groupedDataLength: _this.groupedDataLength\n      };\n    });\n    (0, _defineProperty2[\"default\"])(this, \"filterData\", function () {\n      _this.searched = _this.grouped = _this.treefied = _this.sorted = _this.paged = false;\n      _this.filteredData = (0, _toConsumableArray2[\"default\"])(_this.data);\n\n      if (_this.applyFilters) {\n        _this.columns.filter(function (columnDef) {\n          return columnDef.tableData.filterValue;\n        }).forEach(function (columnDef) {\n          var lookup = columnDef.lookup,\n              type = columnDef.type,\n              tableData = columnDef.tableData;\n\n          if (columnDef.customFilterAndSearch) {\n            _this.filteredData = _this.filteredData.filter(function (row) {\n              return !!columnDef.customFilterAndSearch(tableData.filterValue, row, columnDef);\n            });\n          } else {\n            if (lookup) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef, false);\n\n                return !tableData.filterValue || tableData.filterValue.length === 0 || tableData.filterValue.indexOf(value !== undefined && value !== null && value.toString()) > -1;\n              });\n            } else if (type === 'numeric') {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                return value + '' === tableData.filterValue;\n              });\n            } else if (type === 'boolean' && tableData.filterValue) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                return value && tableData.filterValue === 'checked' || !value && tableData.filterValue === 'unchecked';\n              });\n            } else if (['date', 'datetime'].includes(type)) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                var currentDate = value ? new Date(value) : null;\n\n                if (currentDate && currentDate.toString() !== 'Invalid Date') {\n                  var selectedDate = tableData.filterValue;\n                  var currentDateToCompare = '';\n                  var selectedDateToCompare = '';\n\n                  if (type === 'date') {\n                    currentDateToCompare = (0, _format[\"default\"])(currentDate, 'MM/dd/yyyy');\n                    selectedDateToCompare = (0, _format[\"default\"])(selectedDate, 'MM/dd/yyyy');\n                  } else if (type === 'datetime') {\n                    currentDateToCompare = (0, _format[\"default\"])(currentDate, 'MM/dd/yyyy - HH:mm');\n                    selectedDateToCompare = (0, _format[\"default\"])(selectedDate, 'MM/dd/yyyy - HH:mm');\n                  }\n\n                  return currentDateToCompare === selectedDateToCompare;\n                }\n\n                return true;\n              });\n            } else if (type === 'time') {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                var currentHour = value || null;\n\n                if (currentHour) {\n                  var selectedHour = tableData.filterValue;\n                  var currentHourToCompare = (0, _format[\"default\"])(selectedHour, 'HH:mm');\n                  return currentHour === currentHourToCompare;\n                }\n\n                return true;\n              });\n            } else {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                return value && value.toString().toUpperCase().includes(tableData.filterValue.toUpperCase());\n              });\n            }\n          }\n        });\n      }\n\n      _this.filtered = true;\n    });\n    (0, _defineProperty2[\"default\"])(this, \"searchData\", function () {\n      _this.grouped = _this.treefied = _this.sorted = _this.paged = false;\n      _this.searchedData = (0, _toConsumableArray2[\"default\"])(_this.filteredData);\n\n      if (_this.searchText && _this.applySearch) {\n        var trimmedSearchText = _this.searchText.trim();\n\n        _this.searchedData = _this.searchedData.filter(function (row) {\n          return _this.columns.filter(function (columnDef) {\n            return columnDef.searchable === undefined ? !columnDef.hidden : columnDef.searchable;\n          }).some(function (columnDef) {\n            if (columnDef.customFilterAndSearch) {\n              return !!columnDef.customFilterAndSearch(trimmedSearchText, row, columnDef);\n            } else if (columnDef.field) {\n              var value = _this.getFieldValue(row, columnDef);\n\n              if (value) {\n                return value.toString().toUpperCase().includes(trimmedSearchText.toUpperCase());\n              }\n            }\n          });\n        });\n      }\n\n      _this.searched = true;\n    });\n  }\n\n  (0, _createClass2[\"default\"])(DataManager, [{\n    key: \"setData\",\n    value: function setData(data) {\n      var _this2 = this;\n\n      this.selectedCount = 0;\n      var prevDataObject = {};\n\n      if (this.data.length !== 0 && this.data[0].id !== undefined) {\n        prevDataObject = this.data.reduce(function (obj, row) {\n          obj[row.tableData.id] = row.tableData;\n          return obj;\n        }, {});\n      }\n\n      if (process.env.NODE_ENV === 'development' && !this.checkForId) {\n        this.checkForId = true;\n\n        if (data.some(function (d) {\n          return d.id === undefined;\n        })) {\n          console.warn('The table requires all rows to have an unique id property. A row was provided without id in the rows prop. To prevent the loss of state between renders, please provide an unique id for each row.');\n        }\n      }\n\n      this.data = data.map(function (row, index) {\n        var prevTableData = prevDataObject[row.id] || {};\n\n        var tableData = _objectSpread(_objectSpread({\n          id: row.id || index,\n          // `uuid` acts as our 'key' and is generated when new data\n          // is passed into material-table externally.\n          uuid: row.uuid || _uuid[\"default\"].v4()\n        }, prevTableData), row.tableData);\n\n        if (tableData.checked) {\n          _this2.selectedCount++;\n        }\n\n        return _objectSpread(_objectSpread({}, row), {}, {\n          tableData: tableData\n        });\n      });\n      this.filtered = false;\n    }\n  }, {\n    key: \"setColumns\",\n    value: function setColumns(columns) {\n      var prevColumns = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var usedWidth = ['0px'];\n      this.columns = columns.map(function (columnDef, index) {\n        var width = typeof columnDef.width === 'number' ? columnDef.width + 'px' : columnDef.width;\n\n        if (width && columnDef.tableData && columnDef.tableData.width !== undefined) {\n          usedWidth.push(width);\n        }\n\n        var prevColumn = prevColumns.find(function (_ref) {\n          var id = _ref.id;\n          return id === index;\n        });\n\n        var tableData = _objectSpread(_objectSpread(_objectSpread({\n          columnOrder: index,\n          filterValue: columnDef.defaultFilter,\n          groupOrder: columnDef.defaultGroupOrder,\n          groupSort: columnDef.defaultGroupSort || 'asc',\n          width: width,\n          initialWidth: width,\n          additionalWidth: 0\n        }, prevColumn ? prevColumn.tableData : {}), columnDef.tableData), {}, {\n          id: index\n        });\n\n        columnDef.tableData = tableData;\n        return columnDef;\n      });\n      var undefinedWidthColumns = this.columns.filter(function (c) {\n        if (c.hidden) {\n          // Hidden column\n          return false;\n        }\n\n        if (c.columnDef && c.columnDef.tableData && c.columnDef.tableData.width) {\n          // tableData.width already calculated\n          return false;\n        } // Calculate width if no value provided\n\n\n        return c.width === undefined;\n      });\n      usedWidth = '(' + usedWidth.join(' + ') + ')';\n      undefinedWidthColumns.forEach(function (columnDef) {\n        columnDef.tableData.width = columnDef.tableData.initialWidth = \"calc((100% - \".concat(usedWidth, \") / \").concat(undefinedWidthColumns.length, \")\");\n      });\n    }\n  }, {\n    key: \"setDefaultExpanded\",\n    value: function setDefaultExpanded(expanded) {\n      this.defaultExpanded = expanded;\n    }\n  }, {\n    key: \"changeApplySearch\",\n    value: function changeApplySearch(applySearch) {\n      this.applySearch = applySearch;\n      this.searched = false;\n    }\n  }, {\n    key: \"changeApplyFilters\",\n    value: function changeApplyFilters(applyFilters) {\n      this.applyFilters = applyFilters;\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeApplySort\",\n    value: function changeApplySort(applySort) {\n      this.applySort = applySort;\n      this.sorted = false;\n    }\n  }, {\n    key: \"changePaging\",\n    value: function changePaging(paging) {\n      this.paging = paging;\n      this.paged = false;\n    }\n  }, {\n    key: \"changeCurrentPage\",\n    value: function changeCurrentPage(currentPage) {\n      this.currentPage = currentPage;\n      this.paged = false;\n    }\n  }, {\n    key: \"changePageSize\",\n    value: function changePageSize(pageSize) {\n      this.pageSize = pageSize;\n      this.paged = false;\n    }\n  }, {\n    key: \"changeParentFunc\",\n    value: function changeParentFunc(parentFunc) {\n      this.parentFunc = parentFunc;\n    }\n  }, {\n    key: \"changeFilterValue\",\n    value: function changeFilterValue(columnId, value) {\n      this.columns[columnId].tableData.filterValue = value;\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeRowSelected\",\n    value: function changeRowSelected(checked, path) {\n      var _this3 = this;\n\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.tableData.checked = checked;\n      this.selectedCount = this.selectedCount + (checked ? 1 : -1);\n\n      var checkChildRows = function checkChildRows(rowData) {\n        if (rowData.tableData.childRows) {\n          rowData.tableData.childRows.forEach(function (childRow) {\n            if (childRow.tableData.checked !== checked) {\n              childRow.tableData.checked = checked;\n              _this3.selectedCount = _this3.selectedCount + (checked ? 1 : -1);\n            }\n\n            checkChildRows(childRow);\n          });\n        }\n      };\n\n      checkChildRows(rowData);\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeDetailPanelVisibility\",\n    value: function changeDetailPanelVisibility(path, render) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n\n      if ((rowData.tableData.showDetailPanel || '').toString() === render.toString()) {\n        rowData.tableData.showDetailPanel = undefined;\n      } else {\n        rowData.tableData.showDetailPanel = render;\n      }\n\n      if (this.detailPanelType === 'single' && this.lastDetailPanelRow && this.lastDetailPanelRow != rowData) {\n        this.lastDetailPanelRow.tableData.showDetailPanel = undefined;\n      }\n\n      this.lastDetailPanelRow = rowData;\n    }\n  }, {\n    key: \"changeGroupExpand\",\n    value: function changeGroupExpand(path) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.isExpanded = !rowData.isExpanded;\n    }\n  }, {\n    key: \"changeSearchText\",\n    value: function changeSearchText(searchText) {\n      this.searchText = searchText;\n      this.searched = false;\n      this.currentPage = 0;\n    }\n  }, {\n    key: \"changeSearchDebounce\",\n    value: function changeSearchDebounce(searchDebounceDelay) {\n      this.searchDebounceDelay = searchDebounceDelay;\n    }\n  }, {\n    key: \"changeRowEditing\",\n    value: function changeRowEditing(rowData, mode) {\n      if (rowData) {\n        rowData.tableData.editing = mode;\n\n        if (this.lastEditingRow && this.lastEditingRow != rowData) {\n          this.lastEditingRow.tableData.editing = undefined;\n        }\n\n        if (mode) {\n          this.lastEditingRow = rowData;\n        } else {\n          this.lastEditingRow = undefined;\n        }\n      } else if (this.lastEditingRow) {\n        this.lastEditingRow.tableData.editing = undefined;\n        this.lastEditingRow = undefined;\n      }\n    }\n  }, {\n    key: \"changeBulkEditOpen\",\n    value: function changeBulkEditOpen(bulkEditOpen) {\n      this.bulkEditOpen = bulkEditOpen;\n    }\n  }, {\n    key: \"changeAllSelected\",\n    value: function changeAllSelected(checked, selectionProps) {\n      var selectedCount = 0;\n\n      var isChecked = function isChecked(row) {\n        var selectionResult = selectionProps ? selectionProps(row) : {\n          disabled: false\n        };\n        return row.tableData.disabled || selectionResult.disabled ? false : checked;\n      };\n\n      if (this.isDataType('group')) {\n        var setCheck = function setCheck(data) {\n          data.forEach(function (element) {\n            if (element.groups.length > 0) {\n              setCheck(element.groups);\n            } else {\n              element.data.forEach(function (d) {\n                d.tableData.checked = isChecked(d);\n                selectedCount++;\n              });\n            }\n          });\n        };\n\n        setCheck(this.groupedData);\n      } else {\n        this.searchedData.forEach(function (row) {\n          row.tableData.checked = isChecked(row);\n        });\n        selectedCount = this.searchedData.length;\n      }\n\n      this.selectedCount = checked ? selectedCount : 0;\n    }\n  }, {\n    key: \"changeOrder\",\n    value: function changeOrder(orderBy, orderDirection) {\n      this.orderBy = orderBy;\n      this.orderDirection = orderDirection;\n      this.currentPage = 0;\n      this.sorted = false;\n    }\n  }, {\n    key: \"changeGroupOrder\",\n    value: function changeGroupOrder(columnId) {\n      var column = this.columns.find(function (c) {\n        return c.tableData.id === columnId;\n      });\n\n      if (column.tableData.groupSort === 'asc') {\n        column.tableData.groupSort = 'desc';\n      } else {\n        column.tableData.groupSort = 'asc';\n      }\n\n      this.sorted = false;\n    }\n  }, {\n    key: \"changeColumnHidden\",\n    value: function changeColumnHidden(column, hidden) {\n      column.hidden = hidden; // https://github.com/mbrn/material-table/pull/2655\n      // https://github.com/material-table-core/core/issues/20#issuecomment-752265651\n      // Fix #20\n\n      this.setColumns(this.columns);\n    }\n  }, {\n    key: \"changeTreeExpand\",\n    value: function changeTreeExpand(path) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.tableData.isTreeExpanded = !rowData.tableData.isTreeExpanded;\n    }\n  }, {\n    key: \"changeDetailPanelType\",\n    value: function changeDetailPanelType(type) {\n      this.detailPanelType = type;\n    }\n  }, {\n    key: \"changeByDrag\",\n    value: function changeByDrag(result) {\n      var start = 0;\n      var groups = this.columns.filter(function (col) {\n        return col.tableData.groupOrder > -1;\n      }).sort(function (col1, col2) {\n        return col1.tableData.groupOrder - col2.tableData.groupOrder;\n      });\n\n      if (result.destination.droppableId === 'groups' && result.source.droppableId === 'groups') {\n        start = Math.min(result.destination.index, result.source.index);\n        var end = Math.max(result.destination.index, result.source.index);\n        groups = groups.slice(start, end + 1);\n\n        if (result.destination.index < result.source.index) {\n          // Take last and add as first\n          var last = groups.pop();\n          groups.unshift(last);\n        } else {\n          // Take first and add as last\n          var _last = groups.shift();\n\n          groups.push(_last);\n        }\n      } else if (result.destination.droppableId === 'groups' && result.source.droppableId === 'headers') {\n        var newGroup = this.columns.find(function (c) {\n          return c.tableData.id == result.draggableId;\n        });\n\n        if (newGroup.grouping === false || !newGroup.field) {\n          return;\n        }\n\n        groups.splice(result.destination.index, 0, newGroup);\n      } else if (result.destination.droppableId === 'headers' && result.source.droppableId === 'groups') {\n        var removeGroup = this.columns.find(function (c) {\n          return c.tableData.id == result.draggableId;\n        });\n        removeGroup.tableData.groupOrder = undefined;\n        groups.splice(result.source.index, 1);\n      } else if (result.destination.droppableId === 'headers' && result.source.droppableId === 'headers') {\n        start = Math.min(result.destination.index, result.source.index);\n\n        var _end = Math.max(result.destination.index, result.source.index); // get the effective start and end considering hidden columns\n\n\n        var sorted = this.columns.sort(function (a, b) {\n          return a.tableData.columnOrder - b.tableData.columnOrder;\n        }).filter(function (column) {\n          return column.tableData.groupOrder === undefined;\n        });\n        var numHiddenBeforeStart = 0;\n        var numVisibleBeforeStart = 0;\n\n        for (var i = 0; i < sorted.length && numVisibleBeforeStart <= start; i++) {\n          if (sorted[i].hidden) {\n            numHiddenBeforeStart++;\n          } else {\n            numVisibleBeforeStart++;\n          }\n        }\n\n        var effectiveStart = start + numHiddenBeforeStart;\n        var effectiveEnd = effectiveStart;\n\n        for (var numVisibleInRange = 0; numVisibleInRange < _end - start && effectiveEnd < sorted.length; effectiveEnd++) {\n          if (!sorted[effectiveEnd].hidden) {\n            numVisibleInRange++;\n          }\n        }\n\n        var colsToMov = sorted.slice(effectiveStart, effectiveEnd + 1);\n\n        if (result.destination.index < result.source.index) {\n          // Take last and add as first\n          var _last2 = colsToMov.pop();\n\n          colsToMov.unshift(_last2);\n        } else {\n          // Take first and add as last\n          var _last3 = colsToMov.shift();\n\n          colsToMov.push(_last3);\n        }\n\n        for (var _i = 0; _i < colsToMov.length; _i++) {\n          colsToMov[_i].tableData.columnOrder = effectiveStart + _i;\n        }\n\n        return;\n      } else {\n        return;\n      }\n\n      for (var _i2 = 0; _i2 < groups.length; _i2++) {\n        groups[_i2].tableData.groupOrder = start + _i2;\n      }\n\n      this.sorted = this.grouped = false;\n    }\n  }, {\n    key: \"onColumnResized\",\n    value: function onColumnResized(id, additionalWidth) {\n      var column = this.columns.find(function (c) {\n        return c.tableData.id === id;\n      });\n\n      if (!column) {\n        return;\n      }\n\n      var nextColumn = this.columns.find(function (c) {\n        return c.tableData.id === id + 1;\n      });\n\n      if (!nextColumn) {\n        return;\n      }\n\n      column.tableData.additionalWidth = additionalWidth;\n      column.tableData.width = \"calc(\".concat(column.tableData.initialWidth, \" + \").concat(column.tableData.additionalWidth, \"px)\");\n    }\n  }, {\n    key: \"findGroupByGroupPath\",\n    value: function findGroupByGroupPath(renderData, path) {\n      var data = {\n        groups: renderData,\n        groupsIndex: this.rootGroupsIndex\n      };\n      var node = path.reduce(function (result, current) {\n        if (!result) {\n          return undefined;\n        }\n\n        if (result.groupsIndex[current] !== undefined) {\n          return result.groups[result.groupsIndex[current]];\n        }\n\n        return undefined; // const group = result.groups.find(a => a.value === current);\n        // return group;\n      }, data);\n      return node;\n    }\n  }, {\n    key: \"isDataType\",\n    value: function isDataType(type) {\n      var dataType = 'normal';\n\n      if (this.parentFunc) {\n        dataType = 'tree';\n      } else if (this.columns.find(function (a) {\n        return a.tableData.groupOrder > -1;\n      })) {\n        dataType = 'group';\n      }\n\n      return type === dataType;\n    }\n  }, {\n    key: \"sort\",\n    value: function sort(a, b, type) {\n      if (type === 'numeric') {\n        return a - b;\n      } else {\n        if (a !== b) {\n          // to find nulls\n          if (!a) return -1;\n          if (!b) return 1;\n        }\n\n        return a < b ? -1 : a > b ? 1 : 0;\n      }\n    }\n  }, {\n    key: \"sortList\",\n    value: function sortList(list) {\n      var _this4 = this;\n\n      var columnDef = this.columns.find(function (_) {\n        return _.tableData.id === _this4.orderBy;\n      });\n\n      if (!columnDef) {\n        columnDef = this.columns[0];\n      }\n\n      var result = list;\n\n      if (columnDef.customSort) {\n        if (this.orderDirection === 'desc') {\n          result = list.sort(function (a, b) {\n            return columnDef.customSort(b, a, 'row', 'desc');\n          });\n        } else {\n          result = list.sort(function (a, b) {\n            return columnDef.customSort(a, b, 'row');\n          });\n        }\n      } else {\n        result = list.sort(this.orderDirection === 'desc' ? function (a, b) {\n          return _this4.sort(_this4.getFieldValue(b, columnDef), _this4.getFieldValue(a, columnDef), columnDef.type);\n        } : function (a, b) {\n          return _this4.sort(_this4.getFieldValue(a, columnDef), _this4.getFieldValue(b, columnDef), columnDef.type);\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"groupData\",\n    value: function groupData() {\n      var _this5 = this;\n\n      this.sorted = this.paged = false;\n      this.groupedDataLength = 0;\n      var tmpData = (0, _toConsumableArray2[\"default\"])(this.searchedData);\n      var groups = this.columns.filter(function (col) {\n        return col.tableData.groupOrder > -1;\n      }).sort(function (col1, col2) {\n        return col1.tableData.groupOrder - col2.tableData.groupOrder;\n      });\n      var subData = tmpData.reduce(function (result, currentRow) {\n        var object = result;\n        object = groups.reduce(function (o, colDef) {\n          var value = currentRow[colDef.field] || (0, _2.byString)(currentRow, colDef.field);\n          var group;\n\n          if (o.groupsIndex[value] !== undefined) {\n            group = o.groups[o.groupsIndex[value]];\n          }\n\n          if (!group) {\n            var path = [].concat((0, _toConsumableArray2[\"default\"])(o.path || []), [value]);\n            var oldGroup = _this5.findGroupByGroupPath(_this5.groupedData, path) || {\n              isExpanded: typeof _this5.defaultExpanded === 'boolean' ? _this5.defaultExpanded : false\n            };\n            group = {\n              value: value,\n              groups: [],\n              groupsIndex: {},\n              data: [],\n              isExpanded: oldGroup.isExpanded,\n              path: path\n            };\n            o.groups.push(group);\n            o.groupsIndex[value] = o.groups.length - 1;\n          }\n\n          return group;\n        }, object);\n        object.data.push(currentRow);\n        _this5.groupedDataLength++;\n        return result;\n      }, {\n        groups: [],\n        groupsIndex: {}\n      });\n      this.groupedData = subData.groups;\n      this.grouped = true;\n      this.rootGroupsIndex = subData.groupsIndex;\n    }\n  }, {\n    key: \"treefyData\",\n    value: function treefyData() {\n      var _this6 = this;\n\n      this.sorted = this.paged = false;\n      this.data.forEach(function (a) {\n        return a.tableData.childRows = null;\n      });\n      this.treefiedData = [];\n      this.treefiedDataLength = 0;\n      this.treeDataMaxLevel = 0; // if filter or search is enabled, collapse the tree\n\n      if (this.searchText || this.columns.some(function (columnDef) {\n        return columnDef.tableData.filterValue;\n      })) {\n        this.data.forEach(function (row) {\n          row.tableData.isTreeExpanded = false;\n        }); // expand the tree for all nodes present after filtering and searching\n\n        this.expandTreeForNodes(this.searchedData);\n      }\n\n      var addRow = function addRow(rowData) {\n        rowData.tableData.markedForTreeRemove = false;\n\n        var parent = _this6.parentFunc(rowData, _this6.data);\n\n        if (parent) {\n          parent.tableData.childRows = parent.tableData.childRows || [];\n\n          if (!parent.tableData.childRows.includes(rowData)) {\n            parent.tableData.childRows.push(rowData);\n            _this6.treefiedDataLength++;\n          }\n\n          addRow(parent);\n          rowData.tableData.path = [].concat((0, _toConsumableArray2[\"default\"])(parent.tableData.path), [parent.tableData.childRows.length - 1]);\n          _this6.treeDataMaxLevel = Math.max(_this6.treeDataMaxLevel, rowData.tableData.path.length);\n        } else {\n          if (!_this6.treefiedData.includes(rowData)) {\n            _this6.treefiedData.push(rowData);\n\n            _this6.treefiedDataLength++;\n            rowData.tableData.path = [_this6.treefiedData.length - 1];\n          }\n        }\n      }; // Add all rows initially\n\n\n      this.data.forEach(function (rowData) {\n        addRow(rowData);\n      });\n\n      var markForTreeRemove = function markForTreeRemove(rowData) {\n        var pointer = _this6.treefiedData;\n        rowData.tableData.path.forEach(function (pathPart) {\n          if (pointer.tableData && pointer.tableData.childRows) {\n            pointer = pointer.tableData.childRows;\n          }\n\n          pointer = pointer[pathPart];\n        });\n        pointer.tableData.markedForTreeRemove = true;\n      };\n\n      var traverseChildrenAndUnmark = function traverseChildrenAndUnmark(rowData) {\n        if (rowData.tableData.childRows) {\n          rowData.tableData.childRows.forEach(function (row) {\n            traverseChildrenAndUnmark(row);\n          });\n        }\n\n        rowData.tableData.markedForTreeRemove = false;\n      }; // for all data rows, restore initial expand if no search term is available and remove items that shouldn't be there\n\n\n      this.data.forEach(function (rowData) {\n        if (!_this6.searchText && !_this6.columns.some(function (columnDef) {\n          return columnDef.tableData.filterValue;\n        })) {\n          if (rowData.tableData.isTreeExpanded === undefined) {\n            var isExpanded = typeof _this6.defaultExpanded === 'boolean' ? _this6.defaultExpanded : _this6.defaultExpanded(rowData);\n            rowData.tableData.isTreeExpanded = isExpanded;\n          }\n        }\n\n        var hasSearchMatchedChildren = rowData.tableData.isTreeExpanded;\n\n        if (!hasSearchMatchedChildren && _this6.searchedData.indexOf(rowData) < 0) {\n          markForTreeRemove(rowData);\n        }\n      }); // preserve all children of nodes that are matched by search or filters\n\n      this.data.forEach(function (rowData) {\n        if (_this6.searchedData.indexOf(rowData) > -1) {\n          traverseChildrenAndUnmark(rowData);\n        }\n      });\n\n      var traverseTreeAndDeleteMarked = function traverseTreeAndDeleteMarked(rowDataArray) {\n        for (var i = rowDataArray.length - 1; i >= 0; i--) {\n          var item = rowDataArray[i];\n\n          if (item.tableData.childRows) {\n            traverseTreeAndDeleteMarked(item.tableData.childRows);\n          }\n\n          if (item.tableData.markedForTreeRemove) rowDataArray.splice(i, 1);\n        }\n      };\n\n      traverseTreeAndDeleteMarked(this.treefiedData);\n      this.treefied = true;\n    }\n  }, {\n    key: \"sortData\",\n    value: function sortData() {\n      var _this7 = this;\n\n      this.paged = false;\n\n      if (this.isDataType('group')) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.groupedData);\n        var groups = this.columns.filter(function (col) {\n          return col.tableData.groupOrder > -1;\n        }).sort(function (col1, col2) {\n          return col1.tableData.groupOrder - col2.tableData.groupOrder;\n        });\n\n        var sortGroups = function sortGroups(list, columnDef) {\n          if (columnDef.customSort) {\n            return list.sort(columnDef.tableData.groupSort === 'desc' ? function (a, b) {\n              return columnDef.customSort(b.value, a.value, 'group');\n            } : function (a, b) {\n              return columnDef.customSort(a.value, b.value, 'group');\n            });\n          } else {\n            return list.sort(columnDef.tableData.groupSort === 'desc' ? function (a, b) {\n              return _this7.sort(b.value, a.value, columnDef.type);\n            } : function (a, b) {\n              return _this7.sort(a.value, b.value, columnDef.type);\n            });\n          }\n        };\n\n        this.sortedData = sortGroups(this.sortedData, groups[0]); // If you have nested grouped rows and wanted to select one of those row\n        // there was an issue.\n        // -https://github.com/material-table-core/core/pull/74\n        // -https://github.com/mbrn/material-table/issues/2258\n        // -https://github.com/mbrn/material-table/issues/2249\n        // getGroupsIndex resolves this nested grouped rows selection issue.\n\n        var getGroupsIndex = function getGroupsIndex(groups) {\n          return groups.reduce(function (result, group) {\n            result[group.value] = groups.findIndex(function (g) {\n              return g.value === group.value;\n            });\n            return result;\n          }, {});\n        };\n\n        var sortGroupData = function sortGroupData(list, level) {\n          list.forEach(function (element) {\n            if (element.groups.length > 0) {\n              var column = groups[level];\n              element.groups = sortGroups(element.groups, column); // For grouped rows that are nested\n\n              element.groupsIndex = getGroupsIndex(element.groups);\n              sortGroupData(element.groups, level + 1);\n            } else {\n              if (_this7.orderBy >= 0 && _this7.orderDirection) {\n                element.data = _this7.sortList(element.data);\n              } else if (_this7.orderDirection === '') {\n                element.data = element.data.sort(function (a, b) {\n                  return _this7.data.findIndex(function (val) {\n                    return val.tableData.id === a.tableData.id;\n                  }) - _this7.data.findIndex(function (val) {\n                    return val.tableData.id === b.tableData.id;\n                  });\n                });\n              }\n            }\n          });\n        };\n\n        sortGroupData(this.sortedData, 1);\n      } else if (this.isDataType('tree')) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.treefiedData);\n\n        if (this.orderBy != -1) {\n          this.sortedData = this.sortList(this.sortedData);\n\n          var sortTree = function sortTree(list) {\n            list.forEach(function (item) {\n              if (item.tableData.childRows) {\n                item.tableData.childRows = _this7.sortList(item.tableData.childRows);\n                sortTree(item.tableData.childRows);\n              }\n            });\n          };\n\n          sortTree(this.sortedData);\n        }\n      } else if (this.isDataType('normal')) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.searchedData);\n\n        if (this.orderBy != -1 && this.applySort) {\n          this.sortedData = this.sortList(this.sortedData);\n        }\n      }\n\n      this.sorted = true;\n    }\n  }, {\n    key: \"pageData\",\n    value: function pageData() {\n      this.pagedData = (0, _toConsumableArray2[\"default\"])(this.sortedData);\n\n      if (this.paging) {\n        var startIndex = this.currentPage * this.pageSize;\n        var endIndex = startIndex + this.pageSize;\n        this.pagedData = this.pagedData.slice(startIndex, endIndex);\n      }\n\n      this.paged = true;\n    }\n  }]);\n  return DataManager;\n}();\n\nexports[\"default\"] = DataManager;"]},"metadata":{},"sourceType":"script"}